{"version":3,"sources":["common/Detail.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","order/actions.js","order/reducers.js","order/store.js","order/Account.js","order/Choose.js","order/Passengers.js","order/Ticket.js","order/Menu.js","order/App.js","order/index.js","common/Header.js","serviceWorker.js"],"names":["format","d","date","dayjs","locale","Detail","memo","props","departDate","arriveDate","departTimeStr","arriveTimeStr","trainNumber","departStation","arriveStation","durationStr","departDateStr","useMemo","arriveDateStr","className","children","_toConsumableArray","arr","Array","isArray","i","arr2","length","iter","Symbol","iterator","Object","prototype","toString","call","from","TypeError","ACTION_SET_TRAIN_NUMBER","ACTION_SET_DEPART_STATION","ACTION_SET_ARRIVE_STATION","ACTION_SET_SEAT_TYPE","ACTION_SET_DEPART_DATE","ACTION_SET_ARRIVE_DATE","ACTION_SET_DEPART_TIME_STR","ACTION_SET_ARRIVE_TIME_STR","ACTION_SET_DURATION_STR","ACTION_SET_PRICE","ACTION_SET_PASSENGERS","ACTION_SET_MENU","ACTION_SET_IS_MENU_VISIBLE","ACTION_SET_SEARCH_PARSED","setPassengers","passengers","type","payload","setIsMenuVisible","isMenuVisible","fetchInitial","url","dispatch","getState","fetch","then","res","json","data","price","setDepartTimeStr","setArriveTimeStr","setArriveDate","setDurationStr","setPrice","passengerIdSeed","createAdult","passenger","keys","id","name","ticketType","licenceNo","seat","createChild","adultFound","gender","birthday","followAdult","alert","removePassenger","filter","updatePassenger","keysToBeRemoved","newPassengers","assign","key","showMenu","menu","setMenu","hideMenu","showGenderMenu","find","onPress","options","title","value","active","showFollowAdultMenu","map","adult","showTicketTypeMenu","state","action","seatType","searchParsed","createStore","combineReducers","reducers","Date","now","applyMiddleware","thunk","Account","useState","expanded","setExpanded","classnames","onClick","hidden","Choose","createSeat","data-text","Passenger","onRemove","onUpdate","followAdultName","isAdult","placeholder","onChange","e","target","readOnly","Passengers","nameMap","ret","Ticket","MenuItem","Menu","show","option","connect","onBack","useCallback","window","history","back","useEffect","queries","URI","parseQuery","location","search","dStation","aStation","setDepartStation","setArriveStation","setTrainNumber","setSeatType","setDepartDate","valueOf","setSearchParsed","setSearch","passengersCbs","bindActionCreators","menuCbs","chooseCbs","Header","style","display","ReactDOM","render","store","document","getElementById","serviceWorker","width","height","points","stroke","strokeWidth","fill","isLocalhost","Boolean","hostname","match","register","config","navigator","URL","process","href","origin","addEventListener","swUrl","response","contentType","headers","get","status","indexOf","ready","registration","unregister","reload","registerValidSW","catch","console","log","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","controller","onSuccess","error"],"mappings":"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","file":"static/js/order.723d9392.chunk.js","sourcesContent":["import React ,{\r\n  memo,\r\n  useMemo\r\n}from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport './Detail.css'\r\nimport dayjs from 'dayjs'\r\nimport 'dayjs/locale/zh-cn'\r\n\r\n\r\nfunction format(d) {\r\n  const date = dayjs(d)\r\n  return date.format('MM-DD')+''+date.locale('zh-cn').format('ddd')\r\n}\r\n\r\nconst Detail = memo(function Detail(props) {\r\n  const {\r\n    departDate,\r\n    arriveDate,\r\n    departTimeStr,\r\n    arriveTimeStr,\r\n    trainNumber,\r\n    departStation,\r\n    arriveStation,\r\n    durationStr,\r\n  }=props\r\n\r\n  const departDateStr = useMemo(()=>{\r\n      return format(departDate)\r\n    },[departDate])\r\n\r\n  const arriveDateStr = useMemo(()=>{\r\n    return format(arriveDate)\r\n  },[arriveDate])\r\n\r\n  return (\r\n    <div className=\"detail\">\r\n      <div className=\"content\">\r\n        <div className=\"left\">\r\n          <p className=\"city\">{departStation}</p>\r\n          <p className=\"time\">{departTimeStr}</p>\r\n          <p className=\"date\">{departDateStr}</p>\r\n          <p></p>\r\n        </div>\r\n        <div className=\"middle\">\r\n          <p className=\"train-name\">{ trainNumber }</p>\r\n          <p className=\"train-mid\">\r\n            {props.children}\r\n          </p>\r\n          <p className=\"train-time\">耗时{durationStr}</p>\r\n        </div>\r\n        <div className=\"right\">\r\n          <p className=\"city\">{arriveStation}</p>\r\n          <p className=\"time\">{arriveTimeStr}</p>\r\n          <p className=\"date\">{arriveDateStr}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  ) \r\n})\r\n\r\nDetail.propTypes={\r\n  departDate:PropTypes.number.isRequired,\r\n  arriveDate:PropTypes.number.isRequired,\r\n  departTimeStr:PropTypes.string,\r\n  arriveTimeStr:PropTypes.string,\r\n  trainNumber:PropTypes.string.isRequired,\r\n  departStation:PropTypes.string.isRequired,\r\n  arriveStation:PropTypes.string.isRequired,\r\n  durationStr:PropTypes.string,\r\n}\r\n\r\nexport default Detail\r\n\r\n\r\n\r\n","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","\r\nexport const  ACTION_SET_TRAIN_NUMBER = 'SET_TRAIN_NUMBER'\r\nexport const  ACTION_SET_DEPART_STATION = 'SET_DEPART_STATION'\r\nexport const  ACTION_SET_ARRIVE_STATION = 'SET_ARRIVE_STATION'\r\nexport const  ACTION_SET_SEAT_TYPE = 'SET_SEAT_TYPE'\r\nexport const  ACTION_SET_DEPART_DATE = 'SET_DEPART_DATE'\r\nexport const  ACTION_SET_ARRIVE_DATE = 'SET_ARRIVE_DATE'\r\nexport const  ACTION_SET_DEPART_TIME_STR = 'SET_DEPART_TIME_STR'\r\nexport const  ACTION_SET_ARRIVE_TIME_STR = 'SET_ARRIVE_TIME_STR'\r\nexport const  ACTION_SET_DURATION_STR = 'SET_DURATION_STR'\r\nexport const  ACTION_SET_PRICE = 'SET_PRICE'\r\nexport const  ACTION_SET_PASSENGERS = 'SET_PASSENGERS'\r\nexport const  ACTION_SET_MENU = 'SET_MENU'\r\nexport const  ACTION_SET_IS_MENU_VISIBLE = 'SET_IS_MENU_VISIBLE'\r\nexport const  ACTION_SET_SEARCH_PARSED = 'SET_SEARCH_PARSED'\r\n\r\nexport function setTrainNumber(trainNumber){\r\n  return {\r\n    type:ACTION_SET_TRAIN_NUMBER,\r\n    payload:trainNumber\r\n  }\r\n}\r\n\r\nexport function setDepartStation(departStation){\r\n  return {\r\n    type:ACTION_SET_DEPART_STATION,\r\n    payload:departStation\r\n  }\r\n}\r\n\r\nexport function setArriveStation(arriveStation){\r\n  return {\r\n    type:ACTION_SET_ARRIVE_STATION,\r\n    payload:arriveStation\r\n  }\r\n}\r\n\r\nexport function setSeatType(seatType){\r\n  return {\r\n    type:ACTION_SET_SEAT_TYPE,\r\n    payload:seatType\r\n  }\r\n}\r\n\r\nexport function setDepartDate(departDate){\r\n  return {\r\n    type:ACTION_SET_DEPART_DATE,\r\n    payload:departDate\r\n  }\r\n}\r\n\r\nexport function setArriveDate(arriveDate){\r\n  return {\r\n    type:ACTION_SET_ARRIVE_DATE,\r\n    payload:arriveDate\r\n  }\r\n}\r\n\r\nexport function setDepartTimeStr(departTimeStr){\r\n  return {\r\n    type:ACTION_SET_DEPART_TIME_STR,\r\n    payload:departTimeStr\r\n  }\r\n}\r\n\r\nexport function setArriveTimeStr(arriveTimeStr){\r\n  return {\r\n    type:ACTION_SET_ARRIVE_TIME_STR,\r\n    payload:arriveTimeStr\r\n  }\r\n}\r\n\r\nexport function setDurationStr(durationStr){\r\n  return {\r\n    type:ACTION_SET_DURATION_STR,\r\n    payload:durationStr\r\n  }\r\n}\r\n\r\nexport function setPrice(price){\r\n  return {\r\n    type:ACTION_SET_PRICE,\r\n    payload:price\r\n  }\r\n}\r\n\r\nexport function setPassengers(passengers){\r\n  return {\r\n    type:ACTION_SET_PASSENGERS,\r\n    payload:passengers\r\n  }\r\n}\r\n\r\nexport function setMenu(menu){\r\n  return {\r\n    type:ACTION_SET_MENU,\r\n    payload:menu\r\n  }\r\n}\r\n\r\nexport function setIsMenuVisible(isMenuVisible){\r\n  return {\r\n    type:ACTION_SET_IS_MENU_VISIBLE,\r\n    payload:isMenuVisible\r\n  }\r\n}\r\n\r\nexport function setSearchParsed(searchParsed){\r\n  return {\r\n    type:ACTION_SET_SEARCH_PARSED,\r\n    payload:searchParsed\r\n  }\r\n}\r\n\r\n//这是一个异步的actionCreator\r\nexport function fetchInitial(url) {\r\n  return (dispatch,getState)=>{\r\n     fetch(url)\r\n      .then(res=>res.json())\r\n      .then(data=>{\r\n        const {\r\n          departTimeStr,\r\n          arriveTimeStr,\r\n          arriveDate,\r\n          durationStr,\r\n          price\r\n        } = data\r\n        dispatch(setDepartTimeStr(departTimeStr))\r\n        dispatch(setArriveTimeStr(arriveTimeStr))\r\n        dispatch(setArriveDate(arriveDate))\r\n        dispatch(setDurationStr(durationStr))\r\n        dispatch(setPrice(price))\r\n      })\r\n  }\r\n\r\n}\r\n\r\nlet passengerIdSeed = 0\r\n\r\nexport function createAdult(){\r\n  return (dispatch,getState)=>{\r\n    const {passengers}=getState()\r\n\r\n    for(let passenger of passengers){\r\n      const keys = Object.keys(passenger)\r\n      for (let key of keys) {\r\n        if(!passenger[key]){\r\n          return \r\n        }\r\n      }\r\n    }\r\n    dispatch(setPassengers([\r\n      ...passengers,\r\n      {\r\n        id: ++passengerIdSeed,\r\n        name:'',\r\n        ticketType:'adult',\r\n        licenceNo:'',\r\n        seat:'Z',\r\n      }\r\n    ]))\r\n  }\r\n}\r\n\r\nexport function createChild(){\r\n  return (dispatch,getState)=>{\r\n    const {passengers}=getState()\r\n\r\n    let adultFound = null\r\n    for(let passenger of passengers){\r\n      const keys = Object.keys(passenger)\r\n      for (let key of keys) {\r\n        if(!passenger[key]){\r\n          return \r\n        }\r\n      }\r\n      if (passenger.ticketType==='adult') {\r\n        adultFound = passenger.id\r\n      }\r\n    }\r\n\r\n    if (!adultFound) {\r\n      alert('请至少正确添加一个同行成人')\r\n      return\r\n    }\r\n\r\n    dispatch(setPassengers([\r\n      ...passengers,\r\n      {\r\n        id: ++passengerIdSeed,\r\n        name:'',\r\n        gender:'none',\r\n        birthday:'',\r\n        followAdult:adultFound,\r\n        ticketType:'child',\r\n        seat:'Z',\r\n      }\r\n    ]))\r\n  }\r\n}\r\n\r\nexport function removePassenger(id) {\r\n  return (dispatch,getState)=>{\r\n    const {passengers} = getState()\r\n\r\n    const newPassengers = passengers.filter(passenger=>{\r\n      return passenger.id!==id && passenger.followAdult!==id\r\n      //假如某一个成人乘客被剔除，那么与同行的儿童也必须被剔除\r\n    })\r\n    dispatch(setPassengers(newPassengers))\r\n  }\r\n}\r\n\r\nexport function updatePassenger(id, data, keysToBeRemoved=[]) {\r\n  return (dispatch,getState)=>{\r\n    const {passengers} = getState()\r\n\r\n    for (let i = 0; i < passengers.length; ++i) {\r\n      if (passengers[i].id===id) {\r\n        const newPassengers = [...passengers]\r\n        newPassengers[i] = Object.assign({},passengers[i],data)\r\n\r\n        for(let key of keysToBeRemoved){\r\n          delete newPassengers[i][key]\r\n        }\r\n        \r\n        dispatch(setPassengers(newPassengers))\r\n        break;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function showMenu(menu) {\r\n  return (dispatch)=>{\r\n    dispatch(setMenu(menu))\r\n    dispatch(setIsMenuVisible(true))\r\n  }\r\n}\r\n\r\nexport function hideMenu() {\r\n  return setIsMenuVisible(false)\r\n}\r\n\r\nexport function showGenderMenu(id) {\r\n  return (dispatch,getState)=>{\r\n    const {passengers} = getState()\r\n    const passenger = passengers.find(passenger=>passenger.id===id)\r\n    if (!passenger) {\r\n      return \r\n    }\r\n    dispatch(showMenu({\r\n      onPress(gender){\r\n        dispatch(updatePassenger(id,{gender}))\r\n        dispatch(hideMenu())\r\n      },\r\n      options:[\r\n        {\r\n          title:'男',\r\n          value:'male',\r\n          active:'male'===passenger.gender,\r\n        },\r\n        {\r\n          title:'女',\r\n          value:'female',\r\n          active:'female'===passenger.gender,\r\n        }\r\n      ]\r\n    }))\r\n  }\r\n}\r\n\r\nexport function showFollowAdultMenu(id) {\r\n  return (dispatch,getState)=>{\r\n    const {passengers} = getState()\r\n    const passenger = passengers.find(passenger=>passenger.id===id)\r\n    if (!passenger) {\r\n      return \r\n    }\r\n    dispatch(showMenu({\r\n      onPress(followAdult){\r\n        dispatch(updatePassenger(id,{followAdult}))\r\n        dispatch(hideMenu())\r\n      },\r\n      options:passengers\r\n        .filter(passenger=>passenger.ticketType==='adult')\r\n        .map(adult=>{\r\n          return {\r\n            title:adult.name,\r\n            value:adult.id,\r\n            active:adult.id===passenger.followAdult\r\n          }\r\n        })\r\n    }))\r\n  }\r\n}\r\n\r\n\r\nexport function showTicketTypeMenu(id) {\r\n  return (dispatch,getState)=>{\r\n    const {passengers} = getState()\r\n    const passenger = passengers.find(passenger=>passenger.id===id)\r\n    if (!passenger) {\r\n      return \r\n    }\r\n\r\n    dispatch(showMenu({\r\n      onPress(ticketType){\r\n        //成人变儿童\r\n        if ('adult'===ticketType) {\r\n          dispatch(updatePassenger(id,{\r\n            ticketType,\r\n            licenceNo:''\r\n          },['gender','followAdult','birthday']))\r\n        }else{\r\n          //这里判断有没有其他成人乘客的逻辑\r\n          const adult = passengers.find(passenger=>passenger.id!==id&&passenger.ticketType==='adult')\r\n          //我们需要增加三个属性移除掉一个属性，儿童变成人\r\n          if (adult) {\r\n            dispatch(updatePassenger(id,{\r\n              ticketType,\r\n              gender:'',\r\n              followAdult:adult.id,\r\n              birthday:'',\r\n            },['licenceNo']))\r\n          }else{\r\n            alert('没有其他成人乘客')\r\n          }\r\n        }\r\n        dispatch(hideMenu())\r\n      },\r\n      options:[{\r\n        title:'成人票',\r\n        value:'adult',\r\n        active:'adult'===passenger.ticketType,\r\n      },\r\n      {\r\n        title:'儿童票',\r\n        value:'child',\r\n        active:'child'===passenger.ticketType,\r\n      },\r\n    ]\r\n    }))\r\n\r\n  } \r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import {\r\n  ACTION_SET_TRAIN_NUMBER,\r\n  ACTION_SET_DEPART_STATION,\r\n  ACTION_SET_ARRIVE_STATION,\r\n  ACTION_SET_SEAT_TYPE,\r\n  ACTION_SET_DEPART_DATE,\r\n  ACTION_SET_ARRIVE_DATE,\r\n  ACTION_SET_DEPART_TIME_STR,\r\n  ACTION_SET_ARRIVE_TIME_STR,\r\n  ACTION_SET_DURATION_STR,\r\n  ACTION_SET_PRICE,\r\n  ACTION_SET_PASSENGERS,\r\n  ACTION_SET_MENU,\r\n  ACTION_SET_IS_MENU_VISIBLE,\r\n  ACTION_SET_SEARCH_PARSED,\r\n} from  './actions'\r\n\r\nexport default {\r\n  trainNumber(state=null , action){\r\n    const {type , payload} =action\r\n    switch (type){\r\n      case ACTION_SET_TRAIN_NUMBER:\r\n        return payload\r\n      default:  \r\n    }\r\n\r\n    return state\r\n  },\r\n\r\n  departStation(state=null , action){\r\n    const {type , payload} =action\r\n    switch (type){\r\n      case ACTION_SET_DEPART_STATION:\r\n        return payload\r\n      default:  \r\n    }\r\n\r\n    return state\r\n  },\r\n\r\n  arriveStation(state=null , action){\r\n    const {type , payload} =action\r\n    switch (type){\r\n      case ACTION_SET_ARRIVE_STATION:\r\n        return payload\r\n      default:  \r\n    }\r\n\r\n    return state\r\n  },\r\n\r\n  seatType(state=null , action){\r\n    const {type , payload} =action\r\n    switch (type){\r\n      case ACTION_SET_SEAT_TYPE:\r\n        return payload\r\n      default:  \r\n    }\r\n\r\n    return state\r\n  },\r\n\r\n  departDate(state=null , action){\r\n    const {type , payload} =action\r\n    switch (type){\r\n      case ACTION_SET_DEPART_DATE:\r\n        return payload\r\n      default:  \r\n    }\r\n\r\n    return state\r\n  },\r\n\r\n  arriveDate(state=null , action){\r\n    const {type , payload} =action\r\n    switch (type){\r\n      case ACTION_SET_ARRIVE_DATE:\r\n        return payload\r\n      default:  \r\n    }\r\n\r\n    return state\r\n  },\r\n\r\n  departTimeStr(state=null , action){\r\n    const {type , payload} =action\r\n    switch (type){\r\n      case ACTION_SET_DEPART_TIME_STR:\r\n        return payload\r\n      default:  \r\n    }\r\n\r\n    return state\r\n  },\r\n\r\n  arriveTimeStr(state=null , action){\r\n    const {type , payload} =action\r\n    switch (type){\r\n      case ACTION_SET_ARRIVE_TIME_STR:\r\n        return payload\r\n      default:  \r\n    }\r\n\r\n    return state\r\n  },\r\n\r\n  durationStr(state=null , action){\r\n    const {type , payload} =action\r\n    switch (type){\r\n      case ACTION_SET_DURATION_STR:\r\n        return payload\r\n      default:  \r\n    }\r\n\r\n    return state\r\n  },\r\n\r\n  price(state=null , action){\r\n    const {type , payload} =action\r\n    switch (type){\r\n      case ACTION_SET_PRICE:\r\n        return payload\r\n      default:  \r\n    }\r\n\r\n    return state\r\n  },\r\n\r\n  passengers(state=[] , action){\r\n    const {type , payload} =action\r\n    switch (type){\r\n      case ACTION_SET_PASSENGERS:\r\n        return payload\r\n      default:  \r\n    }\r\n\r\n    return state\r\n  },\r\n\r\n  menu(state=null , action){\r\n    const {type , payload} =action\r\n    switch (type){\r\n      case ACTION_SET_MENU:\r\n        return payload\r\n      default:  \r\n    }\r\n\r\n    return state\r\n  },\r\n\r\n  isMenuVisible(state=false , action){\r\n    const {type , payload} =action\r\n    switch (type){\r\n      case ACTION_SET_IS_MENU_VISIBLE:\r\n        return payload\r\n      default:  \r\n    }\r\n\r\n    return state\r\n  },\r\n\r\n  searchParsed(state=false , action){\r\n    const {type , payload} =action\r\n    switch (type){\r\n      case ACTION_SET_SEARCH_PARSED:\r\n        return payload\r\n      default:  \r\n    }\r\n\r\n    return state\r\n  },\r\n\r\n}","import {\r\n  createStore,\r\n  combineReducers,\r\n  applyMiddleware\r\n} from 'redux'\r\n\r\nimport reducers from './reducers'\r\nimport thunk from 'redux-thunk'\r\n\r\nexport default createStore(\r\n  combineReducers(reducers),\r\n  {\r\n    trainNumber:null,\r\n    departStation:null,\r\n    arriveStation:null,\r\n    seatType:null,\r\n    departDate:Date.now(),\r\n    arriveDate:Date.now(),\r\n    departTimeStr:null,\r\n    arriveTimeStr:null,\r\n    durationStr:null,\r\n    price:null,\r\n    passengers:[],\r\n    menu:null,\r\n    isMenuVisible:false,\r\n    searchParsed:false\r\n\r\n  },\r\n  applyMiddleware(thunk)\r\n)\r\n\r\n\r\n","import React,{\r\n  memo,\r\n  useState\r\n} from 'react'\r\nimport './Account.css'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\n\r\n\r\nconst Account = memo(function Account(props) {\r\n  const {\r\n    price = 0,\r\n    length\r\n  }=props\r\n\r\n  const [expanded, setExpanded] = useState(false)\r\n\r\n  return (\r\n    <div className=\"account\">\r\n      <div className={classnames('price',{\r\n        expanded\r\n      })}\r\n        onClick={()=>setExpanded(!expanded)}\r\n      >\r\n        <div className=\"money\">{length*price}</div>\r\n        <div className=\"amount\">支付金额</div>\r\n      </div>\r\n      <div className=\"button\">提交按钮</div>\r\n      <div className={classnames('layer',{hidden:!expanded})}\r\n           onClick={()=>setExpanded(false)}\r\n      ></div>\r\n      <div className={classnames('detail',{hidden:!expanded})}>\r\n        <div className=\"title\">金额详情</div>\r\n        <ul>\r\n          <li>\r\n            <span>火车票</span>\r\n            <span>￥{price}</span>\r\n            <span>&#xD7;{length}</span>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nAccount.propTypes = {\r\n  price:PropTypes.number,\r\n  length:PropTypes.number.isRequired,\r\n}\r\n\r\nexport default Account","import React,{\r\n  memo\r\n} from 'react'\r\nimport './Choose.css'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\n\r\nconst Choose = memo(function Choose(props) {\r\n  const{\r\n    passengers,\r\n    updatePassenger\r\n  }=props\r\n\r\n  function createSeat(seatType) {\r\n    return (\r\n      <div>\r\n        {\r\n          passengers.map(passenger=>{\r\n            return (\r\n              <p \r\n                key={passenger.id} \r\n                className={classnames('seat',{\r\n                  active:passenger.seat===seatType\r\n                  })}\r\n                data-text={seatType}\r\n                onClick={()=>updatePassenger(passenger.id,{\r\n                  seat:seatType,\r\n                })}\r\n              >\r\n                &#xe02d;\r\n              </p>\r\n            )\r\n          })\r\n        }\r\n      </div>\r\n    ) \r\n  }\r\n\r\n  return (\r\n    <div className=\"choose\">\r\n      <p className=\"tip\">在线选座</p>\r\n      <div className=\"container\">\r\n        <div className=\"seats\">\r\n          <div>窗</div>\r\n          {createSeat('A')}\r\n          {createSeat('B')}\r\n          {createSeat('C')}\r\n          <div>过道</div>\r\n          {createSeat('D')}\r\n          {createSeat('F')}\r\n          <div>窗</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nChoose.propTypes = {\r\n  passengers:PropTypes.array.isRequired,\r\n  updatePassenger:PropTypes.func.isRequired,\r\n}\r\n\r\nexport default Choose","import React,{\r\n  memo,\r\n  useMemo\r\n} from 'react'\r\nimport './Passengers.css'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Passenger = memo(function Passenger(props) {\r\n  const {\r\n    id,\r\n    name,\r\n    ticketType,\r\n    licenceNo,\r\n    gender,\r\n    birthday,\r\n    onRemove,\r\n    onUpdate,\r\n    showGenderMenu,\r\n    showFollowAdultMenu,\r\n    showTicketTypeMenu,\r\n    followAdultName\r\n  }=props\r\n\r\n  const isAdult = ticketType==='adult'\r\n\r\n  return (\r\n    <li className=\"passenger\">\r\n      <i className=\"delete\" onClick={()=>onRemove(id)}>\r\n        -\r\n      </i>\r\n      <ol className=\"items\">\r\n        <li className=\"item\">\r\n          <label className=\"label name\">姓名</label>\r\n          <input type=\"text\" \r\n                 className=\"input name\" \r\n                 placeholder=\"乘客姓名\" \r\n                 value={name}\r\n                 onChange={(e)=>onUpdate(id,{name:e.target.value})}\r\n          />\r\n          <label className=\"ticket-type\" onClick={()=>showTicketTypeMenu(id)}>\r\n            {isAdult ? '成人票':'儿童票'}\r\n          </label>\r\n        </li>\r\n        { isAdult &&\r\n          <li className=\"item\">\r\n          <label className=\"label licenceNo\">身份证</label>\r\n          <input type=\"text\" \r\n                 className=\"input licenceNo\" \r\n                 placeholder=\"证件号码\" \r\n                 value={licenceNo}\r\n                 onChange={(e)=>onUpdate(id,{licenceNo:e.target.value})}\r\n          />\r\n        </li>\r\n        }\r\n        { !isAdult &&\r\n          <li className=\"item arrow\">\r\n          <label className=\"label gender\">性别</label>\r\n          <input type=\"text\" \r\n                 className=\"input gender\" \r\n                 placeholder=\"请选择\" \r\n                 onClick={()=>showGenderMenu(id)}\r\n                 value={\r\n                   gender==='male'\r\n                    ?'男'\r\n                    :gender==='female'\r\n                      ?'女'\r\n                      :''\r\n                 }\r\n                 readOnly\r\n          />\r\n        </li>\r\n        }\r\n        { !isAdult &&\r\n          <li className=\"item\">\r\n          <label className=\"label birthday\">出生日期</label>\r\n          <input type=\"text\" \r\n                 className=\"input birthday\" \r\n                 placeholder=\"如19951015\" \r\n                 value={birthday}\r\n                 onChange={(e)=>onUpdate(id,{birthday:e.target.value})}\r\n          />\r\n        </li>\r\n        }\r\n        { !isAdult &&\r\n          <li className=\"item arrow\">\r\n          <label className=\"label followAdult\">同行成人</label>\r\n          <input type=\"text\" \r\n                 className=\"input followAdult\" \r\n                 placeholder=\"请选择\" \r\n                 value={followAdultName}\r\n                 onClick={()=>showFollowAdultMenu(id)}\r\n                 readOnly\r\n          />\r\n        </li>\r\n        }\r\n      </ol>\r\n    </li>\r\n  )\r\n})\r\n\r\nPassenger.propTypes={\r\n  id:PropTypes.number.isRequired,\r\n  name:PropTypes.string.isRequired,\r\n  followAdult:PropTypes.number, //另个一成人的id，对儿童有效，并不一定存在\r\n  ticketType:PropTypes.string.isRequired, //判断是成人还是儿童\r\n  licenceNo:PropTypes.string,  \r\n  gender:PropTypes.string,\r\n  birthday:PropTypes.string,\r\n  onRemove:PropTypes.func.isRequired,\r\n  onUpdate:PropTypes.func.isRequired,\r\n  showGenderMenu:PropTypes.func.isRequired,\r\n  showFollowAdultMenu:PropTypes.func.isRequired,\r\n  showTicketTypeMenu:PropTypes.func.isRequired,\r\n  followAdultName:PropTypes.string,\r\n}\r\n\r\nconst Passengers = memo(function Passengers(props) {\r\n  const{\r\n    passengers,\r\n    createAdult,\r\n    createChild,\r\n    removePassenger,\r\n    updatePassenger,\r\n    showGenderMenu,\r\n    showFollowAdultMenu,\r\n    showTicketTypeMenu\r\n  }=props\r\n\r\n  const nameMap = useMemo(()=>{\r\n    const ret = {}\r\n    for(const passenger of passengers){\r\n      ret[passenger.id] = passenger.name\r\n    }\r\n    return ret\r\n  },[passengers])\r\n\r\n  return (\r\n    <div className=\"passengers\">\r\n      <ul>\r\n        {\r\n          passengers.map(passenger=>{\r\n            return (\r\n              <Passenger \r\n                followAdultName={nameMap[passenger.followAdult]}\r\n                {...passenger} \r\n                key={passenger.id} \r\n                onRemove={removePassenger}\r\n                onUpdate={updatePassenger}\r\n                showGenderMenu={showGenderMenu}\r\n                showFollowAdultMenu={showFollowAdultMenu}\r\n                showTicketTypeMenu={showTicketTypeMenu}\r\n            />)\r\n          })\r\n        }\r\n      </ul>\r\n      <section className=\"add\">\r\n        <div className=\"adult\" onClick={()=>createAdult()}>添加成人</div>\r\n        <div className=\"child\" onClick={()=>createChild()}>添加儿童</div>\r\n\r\n      </section>\r\n    </div>\r\n  )\r\n})\r\n\r\nPassengers.propTypes = {\r\n  passengers:PropTypes.array.isRequired,\r\n  createAdult:PropTypes.func.isRequired,\r\n  createChild:PropTypes.func.isRequired,\r\n  showGenderMenu:PropTypes.func.isRequired,\r\n  showFollowAdultMenu:PropTypes.func.isRequired,\r\n  showTicketTypeMenu:PropTypes.func.isRequired,\r\n  \r\n}\r\n\r\nexport default Passengers","import React,{\r\n  memo\r\n} from 'react'\r\nimport './Ticket.css'\r\nimport propTypes from 'prop-types'\r\n\r\nconst Ticket = memo(function Ticket(props) {\r\n  const {\r\n    price,\r\n    type\r\n  }=props\r\n\r\n  return (\r\n    <div className=\"ticket\">\r\n      <p>\r\n        <span className=\"ticket-type\">{type}</span>\r\n        <span className=\"ticket-price\">{price}</span>\r\n      </p>\r\n      <div className=\"label\">坐席</div>\r\n    </div>\r\n  )\r\n})\r\n\r\n  Ticket.propTypes\r\n = {\r\n  price:propTypes.oneOfType([propTypes.string,propTypes.number]),\r\n  type:propTypes.string.isRequired\r\n}\r\n\r\nexport default Ticket","import React ,{\r\n  memo\r\n}from 'react'\r\nimport './Menu.css'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\n\r\n\r\nconst MenuItem  = memo(function MenuItem(props) {\r\n  const {\r\n    onPress,\r\n    title, //选项的文案\r\n    value, //唯一代表这个选项的值\r\n    active //当年选项是否被选中\r\n  }=props\r\n  return (\r\n    <li className={classnames({active})} onClick={()=>onPress(value)}>\r\n      {title}\r\n    </li>\r\n  )\r\n})\r\n\r\nMenuItem.propTypes={\r\n  onPress:PropTypes.func,\r\n  title:PropTypes.string.isRequired,\r\n  value:PropTypes.oneOfType([PropTypes.string,PropTypes.number]).isRequired,\r\n  active:PropTypes.bool.isRequired,\r\n}\r\n\r\nconst Menu  = memo(function Menu(props) {\r\n  const {\r\n    show, //最好把menu组件预先挂载到页面上，然后自己控制它的显示与隐藏，bool\r\n    options, \r\n    onPress,\r\n    hideMenu\r\n  }=props\r\n  return (\r\n    <div>\r\n      {show && <div className=\"menu-mask\" onClick={()=>hideMenu()}></div>}\r\n      <div className={classnames('menu',{show})}>\r\n        <div className=\"menu-title\"></div>\r\n        <ul>\r\n          {\r\n            options&&\r\n            options.map(option=>{\r\n              return (\r\n                <MenuItem\r\n                  key={option.value}\r\n                  {...option}\r\n                  onPress={onPress}\r\n                />\r\n                )\r\n            })\r\n          }\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nMenu.propTypes={\r\n  show:PropTypes.bool.isRequired,\r\n  options:PropTypes.array,\r\n  onPress:PropTypes.func,\r\n  hideMenu:PropTypes.func.isRequired,\r\n}\r\n\r\nexport default Menu","import React,{\r\n  useCallback,\r\n  useEffect,\r\n  useMemo\r\n} from 'react'\r\nimport URI from 'urijs'\r\nimport {connect} from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport './App.css'\r\n\r\nimport Header from '../common/Header'\r\nimport Detail from '../common/Detail'\r\nimport Account from './Account'\r\nimport Choose from './Choose'\r\nimport Passengers from './Passengers'\r\nimport Ticket from './Ticket'\r\nimport Menu from './Menu'\r\n\r\nimport dayjs from 'dayjs'\r\n\r\nimport {\r\n  setDepartStation,\r\n  setArriveStation,\r\n  setTrainNumber,\r\n  setSeatType,\r\n  setDepartDate,\r\n  setSearchParsed,\r\n  fetchInitial,\r\n  createAdult,\r\n  createChild,\r\n  removePassenger,\r\n  updatePassenger,\r\n  hideMenu,\r\n  showGenderMenu,\r\n  showFollowAdultMenu,\r\n  showTicketTypeMenu\r\n} from './actions'\r\n\r\nfunction App(props) {\r\n  const {\r\n    trainNumber,\r\n    departStation,\r\n    arriveStation,\r\n    seatType,\r\n    departDate,\r\n    arriveDate,\r\n    departTimeStr,\r\n    arriveTimeStr,\r\n    durationStr,\r\n    price,\r\n    passengers,\r\n    menu,\r\n    isMenuVisible,\r\n    searchParsed,\r\n    dispatch,\r\n  }=props\r\n\r\n  const onBack=useCallback(()=>{\r\n    window.history.back() //这是浏览器的默认返回\r\n  },[])\r\n\r\n  useEffect(()=>{\r\n    const queries = URI.parseQuery(window.location.search)\r\n\r\n    const {\r\n      trainNumber,\r\n      dStation,\r\n      aStation,\r\n      type,\r\n      date //字符串\r\n    }=queries\r\n    dispatch(setDepartStation(dStation))\r\n    dispatch(setArriveStation(aStation))\r\n    dispatch(setTrainNumber(trainNumber))\r\n    dispatch(setSeatType(type))\r\n    dispatch(setDepartDate(dayjs(date).valueOf())) //需要unix时间戳\r\n    dispatch(setSearchParsed(true))\r\n  },[dispatch])\r\n\r\n  useEffect(()=>{\r\n    if(!searchParsed){\r\n      return\r\n    }\r\n    const url = new URI('/rest/order')\r\n      .setSearch('dStation',departStation)\r\n      .setSearch('aStation',arriveStation)\r\n      .setSearch('type',seatType)\r\n      .setSearch('date',dayjs(departDate).format('YYYY-MM-DD'))\r\n      .toString()\r\n\r\n      dispatch(fetchInitial(url))\r\n  },[searchParsed, departStation, arriveStation, seatType, departDate, dispatch])\r\n\r\n  const passengersCbs = useMemo(()=>{\r\n    return bindActionCreators({\r\n      createAdult,\r\n      createChild,\r\n      removePassenger,\r\n      updatePassenger,\r\n      showGenderMenu,\r\n      showFollowAdultMenu,\r\n      showTicketTypeMenu\r\n    },dispatch)\r\n  },[dispatch])\r\n\r\n  const menuCbs = useMemo(()=>{\r\n    return bindActionCreators({\r\n     hideMenu,\r\n    },dispatch)\r\n  },[dispatch])  \r\n\r\n  const chooseCbs = useMemo(()=>{\r\n    return bindActionCreators({\r\n      updatePassenger,\r\n    },dispatch)\r\n  },[dispatch])\r\n\r\n  if (!searchParsed) {\r\n    return null\r\n  }\r\n\r\n  return(\r\n    <div className=\"app\">\r\n      <div className=\"header-wrapper\">\r\n        <Header title=\"订单填写\" onBack={onBack} />\r\n      </div>\r\n      <div className=\"detail-wrapper\">\r\n          <Detail \r\n            departDate={departDate}\r\n            arriveDate={arriveDate}\r\n            departTimeStr={departTimeStr}\r\n            arriveTimeStr={arriveTimeStr}\r\n            trainNumber={trainNumber}\r\n            departStation={departStation}\r\n            arriveStation={arriveStation}\r\n            durationStr={durationStr}\r\n          >\r\n            <span className=\"train-icon\" style={{display:'block'}}></span>\r\n          </Detail>\r\n          <Ticket price={price} type={seatType} />\r\n          <Passengers \r\n            passengers={passengers} \r\n            {...passengersCbs}\r\n          />\r\n          {passengers.length > 0&&\r\n            <Choose \r\n              passengers={passengers}\r\n              {...chooseCbs}\r\n            />\r\n          }\r\n          <Account \r\n            length={passengers.length}\r\n            price={price}\r\n          />\r\n          <Menu \r\n            show={isMenuVisible}\r\n            {...menu}\r\n            {...menuCbs}\r\n          />\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  function mapStateToProps(state) {\r\n    return state\r\n  },\r\n  function mapDispatchToProps(dispatch) {\r\n    return {dispatch}\r\n  }\r\n)(App)","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport {Provider} from 'react-redux'\r\nimport 'normalize.css/normalize.css'\r\nimport store from './store'\r\nimport './index.css'\r\nimport App from './App'\r\n\r\nimport * as serviceWorker from '../serviceWorker'\r\n\r\nReactDOM.render(\r\n  <Provider store={store}><App /></Provider>,document.getElementById('root')\r\n)\r\n\r\nif ('production'===process.env.NODE_ENV){\r\n  serviceWorker.register()\r\n}else{\r\n  serviceWorker.unregister()\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import \"./Header.css\"\r\nimport React from \"react\"\r\nimport PropTypes from \"prop-types\"\r\nfunction Header(props) {\r\n  const { onBack, title } = props\r\n\r\n  return (\r\n    <div className=\"header\">\r\n      <div className=\"header-back\" onClick={onBack}>\r\n        <svg width=\"42\" height=\"42\">\r\n          <polyline\r\n            points=\"25,13 16,21 25,29\"\r\n            stroke=\"#fff\"\r\n            strokeWidth=\"2\"\r\n            fill=\"none\"\r\n          />\r\n        </svg>\r\n      </div>\r\n      <h1 className=\"header-title\">{title}</h1>\r\n    </div>\r\n  )\r\n}\r\n\r\nHeader.propTypes = {\r\n  onBack: PropTypes.func.isRequired,\r\n  title: PropTypes.string.isRequired\r\n}\r\n\r\nexport default Header\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n"],"sourceRoot":""}