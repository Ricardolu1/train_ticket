{"version":3,"sources":["common/Nav.js","common/useNav.js","common/fp.js","../node_modules/left-pad/index.js","common/Header.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","query/constant.js","query/action.js","query/reducers.js","query/store.js","query/List.js","query/Slider.js","common/useWinSize.js","query/Bottom.js","query/App.js","query/index.js","serviceWorker.js"],"names":["Nav","memo","props","date","prev","next","isPrevDisabled","isNextDisabled","currentString","useMemo","d","dayjs","format","locale","className","classnames","onClick","useNav","departDate","dispatch","prevDate","nextDate","h0","useCallback","timestamp","Date","now","target","setHours","setMinutes","setSeconds","setMilliseconds","getTime","module","exports","str","len","ch","length","cache","pad","Header","onBack","title","width","height","points","stroke","strokeWidth","fill","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ORDER_DEPART","ORDER_DURATION","ACTION_SET_FROM","ACTION_SET_TO","ACTION_SET_DEPART_DATE","ACTION_SET_HIGH_SPEED","ACTION_SET_TRAIN_LIST","ACTION_SET_ORDER_TYPE","ACTION_SET_ONLY_TICKETS","ACTION_SET_TICKET_TYPES","ACTION_SET_CHECKED_TICKET_TYPES","ACTION_SET_TRAIN_TYPES","ACTION_SET_CHECKED_TRAIN_TYPES","ACTION_SET_DEPART_STATIONS","ACTION_SET_CHECKED_DEPART_STATIONS","ACTION_SET_ARRIVE_STATIONS","ACTION_SET_CHECKED_ARRIVE_STATIONS","ACTION_SET_DEPART_TIME_START","ACTION_SET_DEPART_TIME_END","ACTION_SET_ARRIVE_TIME_START","ACTION_SET_ARRIVE_TIME_END","ACTION_SET_IS_FILTERS_VISIBLE","ACTION_SET_SEARCH_PARSED","setDepartDate","type","payload","setHighSpeed","highSpeed","toggleHighSpeed","getState","toggleOrderType","orderType","toggleOnlyTickets","onlyTickets","setCheckedTicketTypes","checkedTicketTypes","setCheckedTrainTypes","checkedTrainTypes","setCheckedDepartStations","checkedDepartStations","setCheckedArriveStations","checkedArriveStations","setDepartTimeStart","departTimeStart","setDepartTimeEnd","departTimeEnd","setArriveTimeStart","arriveTimeStart","setArriveTimeEnd","arriveTimeEnd","toggleIsFiltersVisible","isFiltersVisible","from","state","action","to","Boolean","trainList","ticketTypes","trainTypes","newCheckedTrainTypes","departStations","arriveStations","searchParsed","createStore","combineReducers","reducers","applyMiddleware","thunk","ListItem","dTime","aTime","dStation","aStation","trainNumber","time","priceMsg","dayAfter","url","URI","setSearch","toString","href","List","list","map","item","Slider","currentStartHours","currentEndHours","onStartChanged","onEndChanged","winSize","useState","document","documentElement","clientWidth","setWidth","clientHeight","setHeight","onResize","useEffect","window","addEventListener","removeEventListener","useWinSize","startHandle","useRef","endHandle","lastStartX","lastEndX","range","rangeWidth","preCurrentStartHours","preCurrentEndHours","start","setStart","end","setEnd","current","startPercent","endPercent","startHours","Math","round","endHours","startText","leftPad","endText","onStartTouchBegin","e","touch","targetTouches","pageX","onEndTouchBegin","onStartTouchMove","distance","onEndTouchMove","parseFloat","getComputedStyle","ref","style","left","checkedReducer","newState","Filter","name","checked","Option","options","checkedMap","option","BottomModal","useReducer","localCheckedTicketTypes","localCheckedTicketTypesDispatch","localCheckedTrainTypes","localCheckedTrainTypesDispatch","localCheckedDepartStations","localCheckedDepartStationsDispatch","localCheckedArriveStations","localCheckedArriveStationsDispatch","localDepartTimeStart","setLocalDepartTimeStart","localDepartTimeEnd","setLocalDepartTimeEnd","localArriveTimeStart","setLocalArriveTimeStart","localArriveTimeEnd","setLocalArriveTimeEnd","optionGroup","isResetDisabled","keys","disabled","group","Bottom","noChecked","connect","history","back","queries","parseQuery","location","search","setFrom","setTo","valueOf","setSearchParsed","join","fetch","then","response","json","result","dataMap","directTrainInfo","trains","filter","ticketType","trainType","depStation","arrStation","setTrainList","setTicketTypes","setTrainTypes","setDepartStations","setArriveStations","bottomCbs","bindActionCreators","ReactDOM","render","store","getElementById","serviceWorker","isLocalhost","hostname","match","register","config","navigator","URL","process","origin","swUrl","contentType","headers","get","status","indexOf","ready","registration","unregister","reload","registerValidSW","catch","console","log","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","error"],"mappings":"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","file":"static/js/query.4e53901a.chunk.js","sourcesContent":["import React,{\r\n  useMemo,\r\n  memo\r\n} from 'react'\r\nimport './Nav.css'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\nimport dayjs from 'dayjs'\r\nimport 'dayjs/locale/zh-cn'\r\n\r\nconst Nav = memo(function Nav(props) {\r\n  const {\r\n    date,\r\n    prev,\r\n    next,\r\n    isPrevDisabled,\r\n    isNextDisabled\r\n  }=props\r\n\r\n  const currentString=useMemo(()=>{\r\n    const d=dayjs(date)\r\n    return d.format('M月D日 ')+d.locale('zh-cn').format('ddd')\r\n    \r\n  },[date])\r\n  return (\r\n    <div className=\"nav\"> \r\n      <span \r\n        className={classnames('nav-prev',{\r\n          'nav-disabled':isPrevDisabled,\r\n        })}\r\n        onClick={prev}\r\n      >\r\n        前一天\r\n      </span>\r\n      <span className=\"nav-current\">{ currentString }</span>\r\n      <span \r\n        className={classnames('nav-next',{\r\n          'nav-disabled':isNextDisabled,\r\n        })}\r\n        onClick={next}\r\n      >\r\n        后一天\r\n      </span>\r\n    </div>\r\n  )\r\n})\r\n\r\nNav.propTypes = {\r\n    date:PropTypes.number.isRequired,\r\n    prev:PropTypes.func.isRequired,\r\n    next:PropTypes.func.isRequired,\r\n    isPrevDisabled:PropTypes.bool.isRequired,\r\n    isNextDisabled:PropTypes.bool.isRequired,\r\n}\r\n\r\nexport default Nav","import {\r\n  useCallback\r\n} from 'react'\r\nimport {h0} from './fp'\r\n\r\n\r\nexport default function useNav(departDate,dispatch,prevDate,nextDate) {\r\n  const isPrevDisabled = h0(departDate)<h0()\r\n  const isNextDisabled = h0(departDate)-h0() > 20*86400*1000\r\n\r\n  const prev =useCallback(()=>{\r\n    if (isPrevDisabled) {\r\n      return \r\n    }\r\n    dispatch(prevDate())\r\n  },[dispatch, isPrevDisabled, prevDate])\r\n\r\n  const next =useCallback(()=>{\r\n    if (isNextDisabled) {\r\n      return \r\n    }\r\n    dispatch(nextDate())\r\n  },[dispatch, isNextDisabled, nextDate]) \r\n  return {\r\n    isPrevDisabled,\r\n    isNextDisabled,\r\n    prev,\r\n    next,\r\n  }\r\n}","export function h0(timestamp=Date.now()) {\r\n  const target = new Date(timestamp)\r\n  target.setHours(0)\r\n  target.setMinutes(0)\r\n  target.setSeconds(0)\r\n  target.setMilliseconds(0)\r\n \r\n  return target.getTime()\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","/* This program is free software. It comes without any warranty, to\n     * the extent permitted by applicable law. You can redistribute it\n     * and/or modify it under the terms of the Do What The Fuck You Want\n     * To Public License, Version 2, as published by Sam Hocevar. See\n     * http://www.wtfpl.net/ for more details. */\n'use strict';\n\nmodule.exports = leftPad;\nvar cache = ['', ' ', '  ', '   ', '    ', '     ', '      ', '       ', '        ', '         '];\n\nfunction leftPad(str, len, ch) {\n  // convert `str` to a `string`\n  str = str + ''; // `len` is the `pad`'s length now\n\n  len = len - str.length; // doesn't need to pad\n\n  if (len <= 0) return str; // `ch` defaults to `' '`\n\n  if (!ch && ch !== 0) ch = ' '; // convert `ch` to a `string` cuz it could be a number\n\n  ch = ch + ''; // cache common use cases\n\n  if (ch === ' ' && len < 10) return cache[len] + str; // `pad` starts with an empty string\n\n  var pad = ''; // loop\n\n  while (true) {\n    // add `ch` to `pad` if `len` is odd\n    if (len & 1) pad += ch; // divide `len` by 2, ditch the remainder\n\n    len >>= 1; // \"double\" the `ch` so this operation count grows logarithmically on `len`\n    // each time `ch` is \"doubled\", the `len` would need to be \"doubled\" too\n    // similar to finding a value in binary search tree, hence O(log(n))\n\n    if (len) ch += ch; // `len` is 0, exit the loop\n    else break;\n  } // pad `str`!\n\n\n  return pad + str;\n}","import \"./Header.css\"\r\nimport React from \"react\"\r\nimport PropTypes from \"prop-types\"\r\nfunction Header(props) {\r\n  const { onBack, title } = props\r\n\r\n  return (\r\n    <div className=\"header\">\r\n      <div className=\"header-back\" onClick={onBack}>\r\n        <svg width=\"42\" height=\"42\">\r\n          <polyline\r\n            points=\"25,13 16,21 25,29\"\r\n            stroke=\"#fff\"\r\n            strokeWidth=\"2\"\r\n            fill=\"none\"\r\n          />\r\n        </svg>\r\n      </div>\r\n      <h1 className=\"header-title\">{title}</h1>\r\n    </div>\r\n  )\r\n}\r\n\r\nHeader.propTypes = {\r\n  onBack: PropTypes.func.isRequired,\r\n  title: PropTypes.string.isRequired\r\n}\r\n\r\nexport default Header\r\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export const  ORDER_DEPART = 1   //代表出发早到晚\r\n\r\nexport const ORDER_DURATION = 2  //代表耗时短到长\r\n","import { ORDER_DURATION, ORDER_DEPART } from './constant';\r\n\r\nimport { h0 } from '../common/fp';\r\n\r\nexport const ACTION_SET_FROM = 'SET_FROM';\r\nexport const ACTION_SET_TO = 'SET_TO';\r\nexport const ACTION_SET_DEPART_DATE = 'SET_DEPART_DATE';\r\nexport const ACTION_SET_HIGH_SPEED = 'SET_HIGH_SPEED';\r\nexport const ACTION_SET_TRAIN_LIST = 'SET_TRAIN_LIST';\r\nexport const ACTION_SET_ORDER_TYPE = 'SET_ORDER_TYPE';\r\nexport const ACTION_SET_ONLY_TICKETS = 'SET_ONLY_TICKETS';\r\nexport const ACTION_SET_TICKET_TYPES = 'SET_TICKET_TYPES';\r\nexport const ACTION_SET_CHECKED_TICKET_TYPES = 'SET_CHECKED_TICKET_TYPES';\r\nexport const ACTION_SET_TRAIN_TYPES = 'SET_TRAIN_TYPES';\r\nexport const ACTION_SET_CHECKED_TRAIN_TYPES = 'SET_CHECKED_TRAIN_TYPES';\r\nexport const ACTION_SET_DEPART_STATIONS = 'SET_DEPART_STATIONS';\r\nexport const ACTION_SET_CHECKED_DEPART_STATIONS = 'SET_CHECKED_DEPART_STATIONS';\r\nexport const ACTION_SET_ARRIVE_STATIONS = 'SET_ARRIVE_STATIONS';\r\nexport const ACTION_SET_CHECKED_ARRIVE_STATIONS = 'SET_CHECKED_ARRIVE_STATIONS';\r\nexport const ACTION_SET_DEPART_TIME_START = 'SET_DEPART_TIME_START';\r\nexport const ACTION_SET_DEPART_TIME_END = 'SET_DEPART_TIME_END';\r\nexport const ACTION_SET_ARRIVE_TIME_START = 'SET_ARRIVE_TIME_START';\r\nexport const ACTION_SET_ARRIVE_TIME_END = 'SET_ARRIVE_TIME_END';\r\nexport const ACTION_SET_IS_FILTERS_VISIBLE = 'SET_IS_FILTERS_VISIBLE';\r\nexport const ACTION_SET_SEARCH_PARSED = 'SET_SEARCH_PARSED';\r\n\r\nexport function setFrom(from) {\r\n    return {\r\n        type: ACTION_SET_FROM,\r\n        payload: from,\r\n    };\r\n}\r\nexport function setTo(to) {\r\n    return {\r\n        type: ACTION_SET_TO,\r\n        payload: to,\r\n    };\r\n}\r\nexport function setDepartDate(departDate) {\r\n    return {\r\n        type: ACTION_SET_DEPART_DATE,\r\n        payload: departDate,\r\n    };\r\n}\r\nexport function setHighSpeed(highSpeed) {\r\n    return {\r\n        type: ACTION_SET_HIGH_SPEED,\r\n        payload: highSpeed,\r\n    };\r\n}\r\n\r\nexport function toggleHighSpeed() {\r\n    return (dispatch, getState) => {\r\n        const { highSpeed } = getState();\r\n\r\n        dispatch(setHighSpeed(!highSpeed));\r\n    };\r\n}\r\nexport function setTrainList(trainList) {\r\n    return {\r\n        type: ACTION_SET_TRAIN_LIST,\r\n        payload: trainList,\r\n    };\r\n}\r\nexport function toggleOrderType() {\r\n    return (dispatch, getState) => {\r\n        const { orderType } = getState();\r\n        if (orderType === ORDER_DEPART) {\r\n            dispatch({\r\n                type: ACTION_SET_ORDER_TYPE,\r\n                payload: ORDER_DURATION,\r\n            });\r\n        } else {\r\n            dispatch({\r\n                type: ACTION_SET_ORDER_TYPE,\r\n                payload: ORDER_DEPART,\r\n            });\r\n        }\r\n    };\r\n}\r\nexport function toggleOnlyTickets() {\r\n    return (dispatch, getState) => {\r\n        const { onlyTickets } = getState();\r\n\r\n        dispatch({\r\n            type: ACTION_SET_ONLY_TICKETS,\r\n            payload: !onlyTickets,\r\n        });\r\n    };\r\n}\r\nexport function setTicketTypes(ticketTypes) {\r\n    return {\r\n        type: ACTION_SET_TICKET_TYPES,\r\n        payload: ticketTypes,\r\n    };\r\n}\r\nexport function setCheckedTicketTypes(checkedTicketTypes) {\r\n    return {\r\n        type: ACTION_SET_CHECKED_TICKET_TYPES,\r\n        payload: checkedTicketTypes,\r\n    };\r\n}\r\nexport function setTrainTypes(trainTypes) {\r\n    return {\r\n        type: ACTION_SET_TRAIN_TYPES,\r\n        payload: trainTypes,\r\n    };\r\n}\r\nexport function setCheckedTrainTypes(checkedTrainTypes) {\r\n    return {\r\n        type: ACTION_SET_CHECKED_TRAIN_TYPES,\r\n        payload: checkedTrainTypes,\r\n    };\r\n}\r\nexport function setDepartStations(departStations) {\r\n    return {\r\n        type: ACTION_SET_DEPART_STATIONS,\r\n        payload: departStations,\r\n    };\r\n}\r\nexport function setCheckedDepartStations(checkedDepartStations) {\r\n    return {\r\n        type: ACTION_SET_CHECKED_DEPART_STATIONS,\r\n        payload: checkedDepartStations,\r\n    };\r\n}\r\nexport function setArriveStations(arriveStations) {\r\n    return {\r\n        type: ACTION_SET_ARRIVE_STATIONS,\r\n        payload: arriveStations,\r\n    };\r\n}\r\nexport function setCheckedArriveStations(checkedArriveStations) {\r\n    return {\r\n        type: ACTION_SET_CHECKED_ARRIVE_STATIONS,\r\n        payload: checkedArriveStations,\r\n    };\r\n}\r\nexport function setDepartTimeStart(departTimeStart) {\r\n    return {\r\n        type: ACTION_SET_DEPART_TIME_START,\r\n        payload: departTimeStart,\r\n    };\r\n}\r\nexport function setDepartTimeEnd(departTimeEnd) {\r\n    return {\r\n        type: ACTION_SET_DEPART_TIME_END,\r\n        payload: departTimeEnd,\r\n    };\r\n}\r\nexport function setArriveTimeStart(arriveTimeStart) {\r\n    return {\r\n        type: ACTION_SET_ARRIVE_TIME_START,\r\n        payload: arriveTimeStart,\r\n    };\r\n}\r\nexport function setArriveTimeEnd(arriveTimeEnd) {\r\n    return {\r\n        type: ACTION_SET_ARRIVE_TIME_END,\r\n        payload: arriveTimeEnd,\r\n    };\r\n}\r\nexport function toggleIsFiltersVisible() {\r\n    return (dispatch, getState) => {\r\n        const { isFiltersVisible } = getState();\r\n\r\n        dispatch({\r\n            type: ACTION_SET_IS_FILTERS_VISIBLE,\r\n            payload: !isFiltersVisible,\r\n        });\r\n    };\r\n}\r\nexport function setSearchParsed(searchParsed) {\r\n    return {\r\n        type: ACTION_SET_SEARCH_PARSED,\r\n        payload: searchParsed,\r\n    };\r\n}\r\n\r\nexport function nextDate() {\r\n    return (dispatch, getState) => {\r\n        const { departDate } = getState();\r\n\r\n        dispatch(setDepartDate(h0(departDate) + 86400 * 1000));\r\n    };\r\n}\r\nexport function prevDate() {\r\n    return (dispatch, getState) => {\r\n        const { departDate } = getState();\r\n\r\n        dispatch(setDepartDate(h0(departDate) - 86400 * 1000));\r\n    };\r\n}\r\n","import {\r\n  ACTION_SET_FROM,\r\n  ACTION_SET_TO,\r\n  ACTION_SET_DEPART_DATE,\r\n  ACTION_SET_HIGH_SPEED,\r\n  ACTION_SET_TRAIN_LIST,\r\n  ACTION_SET_ORDER_TYPE,\r\n  ACTION_SET_ONLY_TICKETS,\r\n  ACTION_SET_TICKET_TYPES,\r\n  ACTION_SET_CHECKED_TICKET_TYPES,\r\n  ACTION_SET_TRAIN_TYPES,\r\n  ACTION_SET_CHECKED_TRAIN_TYPES,\r\n  ACTION_SET_DEPART_STATIONS,\r\n  ACTION_SET_CHECKED_DEPART_STATIONS,\r\n  ACTION_SET_ARRIVE_STATIONS,\r\n  ACTION_SET_CHECKED_ARRIVE_STATIONS,\r\n  ACTION_SET_DEPART_TIME_START,\r\n  ACTION_SET_DEPART_TIME_END,\r\n  ACTION_SET_ARRIVE_TIME_START,\r\n  ACTION_SET_ARRIVE_TIME_END,\r\n  ACTION_SET_IS_FILTERS_VISIBLE,\r\n  ACTION_SET_SEARCH_PARSED,\r\n} from './action';\r\n\r\nimport { ORDER_DEPART } from './constant';\r\n\r\nexport default {\r\n  from(state = null, action) {\r\n      const { type, payload } = action;\r\n      switch (type) {\r\n          case ACTION_SET_FROM:\r\n              return payload;\r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n  to(state = null, action) {\r\n      const { type, payload } = action;\r\n      switch (type) {\r\n          case ACTION_SET_TO:\r\n              return payload;\r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n  departDate(state = Date.now(), action) {\r\n      const { type, payload } = action;\r\n      switch (type) {\r\n          case ACTION_SET_DEPART_DATE:\r\n              return payload;\r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n  highSpeed(state = false, action) {\r\n      const { type, payload } = action;\r\n      let checkedTrainTypes;\r\n\r\n      switch (type) {\r\n          case ACTION_SET_HIGH_SPEED:\r\n              return payload;\r\n          case ACTION_SET_CHECKED_TRAIN_TYPES:\r\n              checkedTrainTypes = payload;\r\n              return Boolean(checkedTrainTypes[1] && checkedTrainTypes[5]);\r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n  trainList(state = [], action) {\r\n      const { type, payload } = action;\r\n      switch (type) {\r\n          case ACTION_SET_TRAIN_LIST:\r\n              return payload;\r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n  orderType(state = ORDER_DEPART, action) {\r\n      const { type, payload } = action;\r\n      switch (type) {\r\n          case ACTION_SET_ORDER_TYPE:\r\n              return payload;\r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n  onlyTickets(state = false, action) {\r\n      const { type, payload } = action;\r\n      switch (type) {\r\n          case ACTION_SET_ONLY_TICKETS:\r\n              return payload;\r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n  ticketTypes(state = [], action) {\r\n      const { type, payload } = action;\r\n      switch (type) {\r\n          case ACTION_SET_TICKET_TYPES:\r\n              return payload;\r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n  checkedTicketTypes(state = {}, action) {\r\n      const { type, payload } = action;\r\n      switch (type) {\r\n          case ACTION_SET_CHECKED_TICKET_TYPES:\r\n              return payload;\r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n  trainTypes(state = [], action) {\r\n      const { type, payload } = action;\r\n      switch (type) {\r\n          case ACTION_SET_TRAIN_TYPES:\r\n              return payload;\r\n          \r\n                  \r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n  checkedTrainTypes(state = {}, action) {\r\n      const { type, payload } = action;\r\n\r\n      let highSpeed;\r\n      let newCheckedTrainTypes;\r\n\r\n      switch (type) {\r\n          case ACTION_SET_CHECKED_TRAIN_TYPES:\r\n              return payload;\r\n          case ACTION_SET_HIGH_SPEED:\r\n              highSpeed = payload;\r\n              newCheckedTrainTypes = { ...state };\r\n\r\n              if (highSpeed) {\r\n                  newCheckedTrainTypes[1] = true;\r\n                  newCheckedTrainTypes[5] = true;\r\n              } else {\r\n                  delete newCheckedTrainTypes[1];\r\n                  delete newCheckedTrainTypes[5];\r\n              }\r\n\r\n              return newCheckedTrainTypes;\r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n  departStations(state = [], action) {\r\n      const { type, payload } = action;\r\n      switch (type) {\r\n          case ACTION_SET_DEPART_STATIONS:\r\n              return payload;\r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n  checkedDepartStations(state = {}, action) {\r\n      const { type, payload } = action;\r\n      switch (type) {\r\n          case ACTION_SET_CHECKED_DEPART_STATIONS:\r\n              return payload;\r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n  arriveStations(state = [], action) {\r\n      const { type, payload } = action;\r\n      switch (type) {\r\n          case ACTION_SET_ARRIVE_STATIONS:\r\n              return payload;\r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n  checkedArriveStations(state = {}, action) {\r\n      const { type, payload } = action;\r\n      switch (type) {\r\n          case ACTION_SET_CHECKED_ARRIVE_STATIONS:\r\n              return payload;\r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n  departTimeStart(state = 0, action) {\r\n      const { type, payload } = action;\r\n      switch (type) {\r\n          case ACTION_SET_DEPART_TIME_START:\r\n              return payload;\r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n  departTimeEnd(state = 24, action) {\r\n      const { type, payload } = action;\r\n      switch (type) {\r\n          case ACTION_SET_DEPART_TIME_END:\r\n              return payload;\r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n  arriveTimeStart(state = 0, action) {\r\n      const { type, payload } = action;\r\n      switch (type) {\r\n          case ACTION_SET_ARRIVE_TIME_START:\r\n              return payload;\r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n  arriveTimeEnd(state = 24, action) {\r\n      const { type, payload } = action;\r\n      switch (type) {\r\n          case ACTION_SET_ARRIVE_TIME_END:\r\n              return payload;\r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n  isFiltersVisible(state = false, action) {\r\n      const { type, payload } = action;\r\n      switch (type) {\r\n          case ACTION_SET_IS_FILTERS_VISIBLE:\r\n              return payload;\r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n  searchParsed(state = false, action) {\r\n      const { type, payload } = action;\r\n      switch (type) {\r\n          case ACTION_SET_SEARCH_PARSED:\r\n              return payload;\r\n          default:\r\n      }\r\n\r\n      return state;\r\n  },\r\n};\r\n","import {\r\n  createStore,\r\n  combineReducers,\r\n  applyMiddleware\r\n} from 'redux'\r\n\r\nimport reducers from './reducers'\r\nimport thunk from 'redux-thunk'\r\nimport {h0} from '../common/fp'\r\nimport {ORDER_DEPART} from './constant'\r\n\r\n\r\nexport default createStore(\r\n  combineReducers(reducers),\r\n  {\r\n    from:null,\r\n    to:null,\r\n    departDate:h0(Date.now()),\r\n    highSpeed:false,\r\n    trainList: [],\r\n    orderType:ORDER_DEPART,\r\n    onlyTickets:false,\r\n    ticketTypes:[],\r\n    checkedTicketTypes:{},\r\n    trainTypes:[],\r\n    checkedTrainTypes:{},\r\n    departStations:[],\r\n    checkedDepartStations:{},\r\n    arriveStations:[],\r\n    checkedArriveStations:{},\r\n    departTimeStart:0,\r\n    departTimeEnd:24,\r\n    arriveTimeStart:0,\r\n    arriveTimeEnd:24,\r\n    isFiltersVisible:false,\r\n    searchParsed:false,\r\n  },\r\n  applyMiddleware(thunk)\r\n)\r\n\r\n\r\n","import React ,{\r\n  memo,\r\n  useMemo\r\n}from 'react'\r\nimport './List.css'\r\nimport PropTypes from 'prop-types'\r\nimport URI from 'urijs'\r\n\r\nconst ListItem = memo(function ListItem(props){\r\n  const {\r\n    dTime, //出发时间\r\n    aTime, //到达时间\r\n    dStation, //出发车站\r\n    aStation, //到达车站\r\n    trainNumber,//车次\r\n    date, //出发日期\r\n    time, //运行时间\r\n    priceMsg,//价格字符串表示\r\n    dayAfter, //是否跨越日期的标记\r\n  }=props //这九个数据都是字符串形式\r\n  const url= useMemo(()=>{\r\n              return  new URI('ticket.html')\r\n                  .setSearch('aStation',aStation)\r\n                  .setSearch('dStation',dStation)\r\n                  .setSearch('trainNumber',trainNumber)\r\n                  .setSearch('date',date)\r\n                  .toString()\r\n  },[\r\n      aStation,\r\n      dStation,\r\n      trainNumber,\r\n      date\r\n  ])\r\n\r\n\r\n  return(\r\n    <li className=\"list-item\">\r\n      <a href={url}>\r\n        <span className=\"item-time\">\r\n          <em>{dTime}</em> \r\n          <br/>\r\n          <em className=\"em-light\">{aTime}<i className=\"time-after\">{dayAfter}</i></em>\r\n        </span>\r\n        <span className=\"item-stations\">\r\n          <em>\r\n            <i className=\"train-start train-end\">始</i>\r\n            {dStation}\r\n          </em>\r\n          <br/>\r\n          <em className=\"em-light\">\r\n            <i className=\"train-start train-end\">终</i>\r\n            {aStation}\r\n          </em>\r\n        </span>\r\n        <span className=\"item-train\">\r\n          <em>{trainNumber}</em>\r\n          <br/>\r\n          <em className=\"em-light\">{time}</em>\r\n        </span>\r\n        <span className=\"item-ticket\">\r\n          <em>{priceMsg}</em>\r\n          <br/>\r\n          <em className=\"em-light-orange\">可抢票</em>\r\n        </span>\r\n      </a>\r\n    </li>\r\n  )\r\n})\r\nListItem.propTypes={\r\n  dTime:PropTypes.string.isRequired,\r\n  aTime:PropTypes.string.isRequired,\r\n  dStation:PropTypes.string.isRequired,\r\n  aStation:PropTypes.string.isRequired,\r\n  trainNumber:PropTypes.string.isRequired,\r\n  date:PropTypes.string.isRequired,\r\n  time:PropTypes.string.isRequired,\r\n  priceMsg:PropTypes.string.isRequired,\r\n  dayAfter:PropTypes.string.isRequired,\r\n}\r\n\r\n\r\nconst List = memo(function List(props) {\r\n  const {\r\n    list\r\n  }=props\r\n  return (\r\n    <ul className=\"List\">\r\n      {\r\n        list.map(item=><ListItem {...item} key={item.trainNumber} />)\r\n      }\r\n    </ul>\r\n  )\r\n})\r\n\r\nList.propTypes = {\r\n  list:PropTypes.array.isRequired\r\n}\r\n\r\nexport default List","import React,{\r\n  memo,\r\n  useState,\r\n  useMemo,\r\n  useRef,\r\n  useEffect\r\n} from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport leftPad  from 'left-pad'\r\nimport './Slider.css'\r\nimport useWinSize from '../common/useWinSize'\r\n\r\n\r\nconst Slider =memo(function Slider(props) {\r\n  const {\r\n    title,\r\n    currentStartHours,\r\n    currentEndHours,\r\n    onStartChanged,\r\n    onEndChanged,\r\n  }=props\r\n\r\n  const winSize = useWinSize()\r\n\r\n  const startHandle = useRef()\r\n  const endHandle = useRef()\r\n\r\n  const lastStartX = useRef()\r\n  const lastEndX = useRef()\r\n\r\n  const range= useRef()\r\n  const rangeWidth =useRef()\r\n\r\n  const preCurrentStartHours=useRef(currentStartHours)\r\n  const preCurrentEndHours=useRef(currentEndHours)\r\n\r\n  \r\n  const[start,setStart] =useState(()=>currentStartHours/24*100)\r\n  const[end,setEnd] =useState(()=>currentEndHours/24*100)\r\n\r\n  if (preCurrentStartHours.current!==currentStartHours) {\r\n    setStart(currentStartHours/24*100)\r\n    preCurrentStartHours.current=currentStartHours  //更新ref的值\r\n  } \r\n\r\n  if (preCurrentEndHours.current!==currentEndHours) {\r\n    setEnd(currentEndHours/24*100)\r\n    preCurrentEndHours.current=currentEndHours   //更新ref的值\r\n  } \r\n  \r\n  const startPercent= useMemo(()=>{\r\n    if (start>100) {\r\n      return 100\r\n    }\r\n    if (start<0) {\r\n      return 0\r\n    }\r\n    return start\r\n  },[start])\r\n\r\n  const endPercent= useMemo(()=>{\r\n    if (end>100) {\r\n      return 100\r\n    }\r\n    if (end<0) {\r\n      return 0\r\n    }\r\n    return end\r\n  },[end])\r\n\r\n  const startHours=useMemo(()=>{\r\n    return Math.round(startPercent*24/100)//取整\r\n  },[startPercent])\r\n\r\n  const endHours=useMemo(()=>{\r\n    return Math.round(endPercent*24/100)//取整\r\n  },[endPercent])\r\n\r\n  const startText = useMemo(()=>{\r\n    return leftPad(startHours,2,'0')+':00'\r\n  },[startHours])\r\n\r\n  const endText = useMemo(()=>{\r\n    return leftPad(endHours,2,'0')+':00'\r\n  },[endHours])\r\n\r\n  function onStartTouchBegin(e) {\r\n    const touch=e.targetTouches[0]\r\n    lastStartX.current = touch.pageX\r\n  }\r\n  function onEndTouchBegin(e) {\r\n    const touch=e.targetTouches[0]\r\n    lastEndX.current = touch.pageX\r\n  }\r\n\r\n  function onStartTouchMove(e) {\r\n    const touch = e.targetTouches[0]\r\n    const distance = touch.pageX-lastStartX.current\r\n    lastStartX.current=touch.pageX //更新上一次的横坐标\r\n    setStart(start=>start+(distance/rangeWidth.current)*100)\r\n  }\r\n  function onEndTouchMove(e) {\r\n    const touch = e.targetTouches[0]\r\n    const distance = touch.pageX-lastEndX.current\r\n    lastEndX.current=touch.pageX //更新上一次的横坐标\r\n    setEnd(end=>end+(distance/rangeWidth.current)*100)  \r\n  }\r\n\r\n\r\n  useEffect(()=>{\r\n    rangeWidth.current= parseFloat(\r\n      window.getComputedStyle(range.current).width\r\n    )\r\n  },[winSize.width])\r\n\r\n  useEffect(()=>{\r\n    startHandle.current.addEventListener(\r\n      'touchstart',\r\n      onStartTouchBegin,\r\n      false\r\n    )\r\n    startHandle.current.addEventListener(\r\n      'touchmove',\r\n      onStartTouchMove,\r\n      false\r\n    )\r\n    endHandle.current.addEventListener(\r\n      'touchstart',\r\n      onEndTouchBegin,\r\n      false\r\n    )\r\n    endHandle.current.addEventListener(\r\n      'touchmove',\r\n      onEndTouchMove,\r\n      false\r\n    )\r\n    \r\n    return ()=>{\r\n      startHandle.current.removeEventListener(\r\n        'touchstart',\r\n        onStartTouchBegin,\r\n        false\r\n      )\r\n      startHandle.current.removeEventListener(\r\n        'touchmove',\r\n        onStartTouchMove,\r\n        false\r\n      )\r\n      endHandle.current.removeEventListener(\r\n        'touchstart',\r\n        onEndTouchBegin,\r\n        false\r\n      )\r\n      endHandle.current.removeEventListener(\r\n        'touchmove',\r\n        onEndTouchMove,\r\n        false\r\n      )\r\n    }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    onStartChanged(startHours)\r\n  },[onStartChanged, startHours])\r\n\r\n  useEffect(()=>{\r\n    onEndChanged(endHours)\r\n  },[endHours, onEndChanged])\r\n\r\n  return(\r\n    <div className=\"option\">\r\n      <h3>{title}</h3>\r\n      <div className=\"range-slider\">\r\n        <div className=\"slider\" ref={range}>\r\n          <div \r\n            className=\"slider-range\" \r\n            style={{\r\n              left:startPercent+'%',\r\n              width:endPercent-startPercent+'%',\r\n            }}>\r\n          </div>\r\n          <i ref={startHandle} className=\"slider-handle\" style={{\r\n            left:startPercent+'%'\r\n          }}>\r\n            <span>{startText}</span>\r\n          </i>\r\n          <i ref={endHandle} className=\"slider-handle\" style={{\r\n            left:endPercent+'%'\r\n          }}>\r\n            <span>{endText}</span>\r\n          </i>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nSlider.propTypes={\r\n  title:PropTypes.string.isRequired,\r\n  currentStartHours:PropTypes.number.isRequired,\r\n  currentEndHours:PropTypes.number.isRequired,\r\n  onStartChanged:PropTypes.func.isRequired,\r\n  onEndChanged:PropTypes.func.isRequired,\r\n}\r\n\r\nexport default Slider\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import {\r\n  useState,\r\n  useEffect\r\n} from 'react'\r\n\r\nexport default function useWinSize() {\r\n  const [width,setWidth] = useState(document.documentElement.clientWidth)\r\n  const [height,setHeight] = useState(document.documentElement.clientHeight)\r\n\r\n  const onResize = ()=>{\r\n     setWidth(document.documentElement.clientWidth)\r\n     setHeight(document.documentElement.clientHeight)\r\n  }\r\n\r\n  useEffect(()=>{\r\n    window.addEventListener('resize',onResize,false)\r\n    return ()=>{\r\n      window.removeEventListener('resize',onResize,false)\r\n    }\r\n  },[])\r\n\r\n  return {width,height}\r\n\r\n }","import React ,{\r\n  memo,\r\n  useState,\r\n  useMemo,\r\n  useReducer\r\n}from 'react'\r\nimport './Bottom.css'\r\nimport PropTypes from 'prop-types'\r\nimport { ORDER_DEPART } from './constant'\r\nimport classnames from 'classnames'\r\nimport Slider from './Slider'\r\n\r\nfunction checkedReducer(state,action) {\r\n  const {type,payload}= action \r\n  const newState = {...state}\r\n  switch (type) {\r\n    case 'toggle':\r\n      if (payload in newState) {\r\n        delete newState[payload]\r\n      }else{\r\n        newState[payload] =true\r\n      }\r\n      return newState\r\n    case 'reset':\r\n      return {}\r\n    default:\r\n  }\r\n  return state\r\n}\r\n\r\nconst Filter = memo(function Filter(props) {\r\n  const {\r\n    name,\r\n    checked,\r\n    dispatch,\r\n    value//这个是从{...option}中拿到的\r\n  }=props\r\n  return (\r\n    <li \r\n      className={classnames({checked})}\r\n      onClick={()=>dispatch({payload:value,type:'toggle'})}\r\n    >\r\n      {name}\r\n    </li>\r\n  )\r\n})\r\n\r\nFilter.propTypes={\r\n  name: PropTypes.string.isRequired,\r\n  checked: PropTypes.bool.isRequired,\r\n  value: PropTypes.string.isRequired,\r\n  dispatch: PropTypes.func.isRequired,\r\n}\r\n\r\n\r\nconst Option=memo(function Option(props) {\r\n  const {\r\n    title,\r\n    options,\r\n    checkedMap,\r\n    dispatch\r\n  }=props\r\n\r\n\r\n  return (\r\n    <div className=\"option\">\r\n      <h3>{title}</h3>\r\n      <ul>\r\n        {\r\n          options.map(option=>{\r\n            return (\r\n              <Filter \r\n                {...option}\r\n                checked={option.value in checkedMap}\r\n                key={option.value}\r\n                dispatch={dispatch}\r\n            />)\r\n          })\r\n        }\r\n      </ul>\r\n    </div>\r\n  )\r\n})\r\n\r\nOption.propTypes = {\r\n  title: PropTypes.string.isRequired,\r\n  options: PropTypes.array.isRequired,\r\n  checkedMap: PropTypes.object.isRequired,\r\n  dispatch: PropTypes.func.isRequired,\r\n\r\n}\r\n\r\n\r\n\r\nconst BottomModal = memo(function BottomModal(props) {\r\n  const {\r\n    ticketTypes,\r\n    trainTypes,\r\n    departStations,\r\n    arriveStations,\r\n    checkedTicketTypes,\r\n    checkedTrainTypes,\r\n    checkedDepartStations,\r\n    checkedArriveStations,\r\n    departTimeStart,\r\n    departTimeEnd,\r\n    arriveTimeStart,\r\n    arriveTimeEnd,\r\n    setCheckedTicketTypes,\r\n    setCheckedTrainTypes,\r\n    setCheckedDepartStations,\r\n    setCheckedArriveStations,\r\n    setDepartTimeStart,\r\n    setDepartTimeEnd,\r\n    setArriveTimeStart,\r\n    setArriveTimeEnd,\r\n    toggleIsFiltersVisible,\r\n  }=props\r\n  \r\n  const [\r\n    localCheckedTicketTypes , \r\n    localCheckedTicketTypesDispatch\r\n  ] = useReducer(checkedReducer,checkedTicketTypes,\r\n    (checkedTicketTypes)=>{\r\n    return {...checkedTicketTypes}\r\n  })\r\n  const [\r\n    localCheckedTrainTypes,\r\n    localCheckedTrainTypesDispatch\r\n  ] = useReducer(checkedReducer,checkedTrainTypes,\r\n    (checkedTrainTypes)=>{\r\n    return {...checkedTrainTypes}\r\n  })\r\n  const [\r\n    localCheckedDepartStations,\r\n    localCheckedDepartStationsDispatch\r\n  ] = useReducer(checkedReducer,checkedDepartStations,\r\n    (checkedDepartStations)=>{\r\n    return {...checkedDepartStations}\r\n  })\r\n  const [localCheckedArriveStations,localCheckedArriveStationsDispatch] = useReducer(checkedReducer,checkedArriveStations,\r\n    (checkedArriveStations)=>{\r\n    return {...checkedArriveStations}\r\n  })\r\n\r\n  const [localDepartTimeStart,setLocalDepartTimeStart] = useState(departTimeStart)\r\n  const [localDepartTimeEnd,setLocalDepartTimeEnd] = useState(departTimeEnd)\r\n  const [localArriveTimeStart,setLocalArriveTimeStart] = useState(arriveTimeStart)\r\n  const [localArriveTimeEnd,setLocalArriveTimeEnd] = useState(arriveTimeEnd)\r\n\r\n\r\n\r\n  const optionGroup = [\r\n    {\r\n      title:'坐席类型',\r\n      options:ticketTypes,\r\n      checkedMap:localCheckedTicketTypes,\r\n      dispatch:localCheckedTicketTypesDispatch\r\n    },\r\n    {\r\n      title:'车次类型',\r\n      options:trainTypes,\r\n      checkedMap:localCheckedTrainTypes,\r\n      dispatch:localCheckedTrainTypesDispatch\r\n    },\r\n    {\r\n      title:'出发车站',\r\n      options:departStations,\r\n      checkedMap:localCheckedDepartStations,\r\n      dispatch:localCheckedDepartStationsDispatch\r\n    },\r\n    {\r\n      title:'到达车站',\r\n      options:arriveStations,\r\n      checkedMap:localCheckedArriveStations,\r\n      dispatch:localCheckedArriveStationsDispatch\r\n    },\r\n  ]    \r\n\r\n  function sure() {\r\n    setCheckedTicketTypes(localCheckedTicketTypes)\r\n    setCheckedTrainTypes(localCheckedTrainTypes)\r\n    setCheckedDepartStations(localCheckedDepartStations)\r\n    setCheckedArriveStations(localCheckedArriveStations)\r\n\r\n    setDepartTimeStart(localDepartTimeStart)\r\n    setDepartTimeEnd(localDepartTimeEnd)\r\n\r\n    setArriveTimeStart(localArriveTimeStart)\r\n    setArriveTimeEnd(localArriveTimeEnd)\r\n\r\n    toggleIsFiltersVisible()\r\n  }\r\n  //Object.keys返回的是一个数组\r\n  const isResetDisabled=useMemo(()=>{\r\n    return  Object.keys(localCheckedTicketTypes).length===0\r\n      &&Object.keys(localCheckedTrainTypes).length===0\r\n      &&Object.keys(localCheckedDepartStations).length===0\r\n      &&Object.keys(localCheckedArriveStations).length===0\r\n      &&localDepartTimeStart===0\r\n      &&localDepartTimeEnd===24\r\n      &&localArriveTimeStart===0\r\n      &&localArriveTimeEnd===24\r\n  },[\r\n      localCheckedTicketTypes,\r\n      localCheckedTrainTypes,\r\n      localCheckedDepartStations,\r\n      localCheckedArriveStations,\r\n      localDepartTimeStart,\r\n      localDepartTimeEnd,\r\n      localArriveTimeStart,\r\n      localArriveTimeEnd,\r\n  ])\r\n\r\n  function reset() {\r\n    if (isResetDisabled) {\r\n      return\r\n    }\r\n    localCheckedTicketTypesDispatch({type:'reset'})\r\n    localCheckedTrainTypesDispatch({type:'reset'})\r\n    localCheckedDepartStationsDispatch({type:'reset'})\r\n    localCheckedArriveStationsDispatch({type:'reset'})\r\n    setLocalDepartTimeStart(0)\r\n    setLocalDepartTimeEnd(24)\r\n    setLocalArriveTimeStart(0)\r\n    setLocalArriveTimeEnd(24)\r\n  }\r\n\r\n  return (\r\n    <div className=\"bottom-modal\">\r\n      <div className=\"bottom-dialog\">\r\n        <div className=\"bottom-dialog-content\">\r\n          <div className='title'>\r\n            <span className={classnames('reset',{\r\n              disabled:isResetDisabled\r\n            })} onClick={()=>reset()}>\r\n              重置\r\n            </span>\r\n            <span className=\"ok\" onClick={()=>sure()}>\r\n              确定\r\n            </span>\r\n          </div>\r\n          <div className=\"options\" >\r\n            {\r\n              optionGroup.map(group=>{\r\n                return (\r\n                  <Option \r\n                    key={group.title}\r\n                    {...group}\r\n                  />\r\n                )\r\n              })\r\n            }\r\n            <Slider \r\n              title=\"出发时间\"\r\n              currentStartHours={localDepartTimeStart}\r\n              currentEndHours={localDepartTimeEnd}\r\n              onStartChanged={setLocalDepartTimeStart}\r\n              onEndChanged={setLocalDepartTimeEnd}\r\n            />\r\n            <Slider \r\n              title=\"到达时间\"\r\n              currentStartHours={localArriveTimeStart}\r\n              currentEndHours={localArriveTimeEnd}\r\n              onStartChanged={setLocalArriveTimeStart}\r\n              onEndChanged={setLocalArriveTimeEnd}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nBottomModal.propTypes={\r\n  ticketTypes:PropTypes.array.isRequired,\r\n  trainTypes:PropTypes.array.isRequired,\r\n  departStations:PropTypes.array.isRequired,\r\n  arriveStations:PropTypes.array.isRequired,\r\n  checkedTicketTypes:PropTypes.object.isRequired,\r\n  checkedTrainTypes:PropTypes.object.isRequired,\r\n  checkedDepartStations:PropTypes.object.isRequired,\r\n  checkedArriveStations:PropTypes.object.isRequired,\r\n  departTimeStart:PropTypes.number.isRequired,\r\n  departTimeEnd:PropTypes.number.isRequired,\r\n  arriveTimeStart:PropTypes.number.isRequired,\r\n  arriveTimeEnd:PropTypes.number.isRequired,\r\n  setCheckedTicketTypes:PropTypes.func.isRequired,\r\n  setCheckedTrainTypes:PropTypes.func.isRequired,\r\n  setCheckedDepartStations:PropTypes.func.isRequired,\r\n  setCheckedArriveStations:PropTypes.func.isRequired,\r\n  setDepartTimeStart:PropTypes.func.isRequired,\r\n  setDepartTimeEnd:PropTypes.func.isRequired,\r\n  setArriveTimeStart:PropTypes.func.isRequired,\r\n  setArriveTimeEnd:PropTypes.func.isRequired,\r\n  toggleIsFiltersVisible:PropTypes.func.isRequired,\r\n}\r\n\r\n\r\n\r\n\r\nexport default function Bottom(props) {\r\n  const {\r\n    toggleHighSpeed,\r\n    toggleIsFiltersVisible,\r\n    toggleOnlyTickets,\r\n    toggleOrderType,\r\n    highSpeed,\r\n    orderType,\r\n    onlyTickets,\r\n    isFiltersVisible,\r\n\r\n    ticketTypes,\r\n    trainTypes,\r\n    departStations,\r\n    arriveStations,\r\n    checkedTicketTypes,\r\n    checkedTrainTypes,\r\n    checkedDepartStations,\r\n    checkedArriveStations,\r\n    departTimeStart,\r\n    departTimeEnd,\r\n    arriveTimeStart,\r\n    arriveTimeEnd,\r\n    setCheckedTicketTypes,\r\n    setCheckedTrainTypes,\r\n    setCheckedDepartStations,\r\n    setCheckedArriveStations,\r\n    setDepartTimeStart,\r\n    setDepartTimeEnd,\r\n    setArriveTimeStart,\r\n    setArriveTimeEnd,\r\n  }=props\r\n\r\n  const noChecked = useMemo(()=>{\r\n    return  Object.keys(checkedTicketTypes).length===0\r\n      &&Object.keys(checkedTrainTypes).length===0\r\n      &&Object.keys(checkedDepartStations).length===0\r\n      &&Object.keys(checkedArriveStations).length===0\r\n      &&departTimeStart===0\r\n      &&departTimeEnd===24\r\n      &&arriveTimeStart===0\r\n      &&arriveTimeEnd===24\r\n  },[\r\n      checkedTicketTypes,\r\n      checkedTrainTypes,\r\n      checkedDepartStations,\r\n      checkedArriveStations,\r\n      departTimeStart,\r\n      departTimeEnd,\r\n      arriveTimeStart,\r\n      arriveTimeEnd,\r\n  ])\r\n\r\n  return (\r\n    <div className=\"bottom\">\r\n      <div className=\"bottom-filters\">\r\n        <span className=\"item\" onClick={toggleOrderType}>\r\n          <i className=\"icon\">&#xf065;</i>\r\n          {orderType===ORDER_DEPART?'出发 早→晚':'耗时 短→长'}\r\n        </span>\r\n        <span \r\n          className={classnames('item',{'item-on':highSpeed})}\r\n          onClick={toggleHighSpeed}\r\n        >\r\n          <i className=\"icon\">{highSpeed ? '\\uf43f':'\\uf43e'}</i>\r\n          只看高铁动车\r\n        </span>\r\n        <span \r\n          className={classnames('item',{'item-on':onlyTickets})}\r\n          onClick={toggleOnlyTickets}\r\n        >\r\n          <i className=\"icon\">{onlyTickets ? '\\uf43d':'\\uf43c'}</i>\r\n          只看有票\r\n        </span>\r\n        <span \r\n          className={classnames('item',{'item-on':isFiltersVisible||!noChecked})}\r\n          onClick={toggleIsFiltersVisible}\r\n        >\r\n          <i className=\"icon\">{noChecked ? '\\uf0f7' : '\\uf446'}</i>\r\n          综合筛选\r\n        </span>\r\n      </div>\r\n      {\r\n        isFiltersVisible&&(\r\n          <BottomModal \r\n            ticketTypes={ticketTypes}\r\n            trainTypes={trainTypes}\r\n            departStations={departStations}\r\n            arriveStations={arriveStations}\r\n            checkedTicketTypes={checkedTicketTypes}\r\n            checkedTrainTypes={checkedTrainTypes}\r\n            checkedDepartStations={checkedDepartStations}\r\n            checkedArriveStations={checkedArriveStations}\r\n            departTimeStart={departTimeStart}\r\n            departTimeEnd={departTimeEnd}\r\n            arriveTimeStart={arriveTimeStart}\r\n            arriveTimeEnd={arriveTimeEnd}\r\n            setCheckedTicketTypes={setCheckedTicketTypes}\r\n            setCheckedTrainTypes={setCheckedTrainTypes}\r\n            setCheckedDepartStations={setCheckedDepartStations}\r\n            setCheckedArriveStations={setCheckedArriveStations}\r\n            setDepartTimeStart={setDepartTimeStart}\r\n            setDepartTimeEnd={setDepartTimeEnd}\r\n            setArriveTimeStart={setArriveTimeStart}\r\n            setArriveTimeEnd={setArriveTimeEnd}\r\n            toggleIsFiltersVisible={toggleIsFiltersVisible}\r\n          />\r\n        )\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\nBottom.propTypes = {\r\n  toggleHighSpeed:PropTypes.func.isRequired,\r\n  toggleIsFiltersVisible:PropTypes.func.isRequired,\r\n  toggleOnlyTickets:PropTypes.func.isRequired,\r\n  toggleOrderType:PropTypes.func.isRequired,\r\n  highSpeed:PropTypes.bool.isRequired,\r\n  orderType:PropTypes.number.isRequired,\r\n  onlyTickets:PropTypes.bool.isRequired,\r\n  isFiltersVisible:PropTypes.bool.isRequired,\r\n\r\n  ticketTypes:PropTypes.array.isRequired,\r\n  trainTypes:PropTypes.array.isRequired,\r\n  departStations:PropTypes.array.isRequired,\r\n  arriveStations:PropTypes.array.isRequired,\r\n  checkedTicketTypes:PropTypes.object.isRequired,\r\n  checkedTrainTypes:PropTypes.object.isRequired,\r\n  checkedDepartStations:PropTypes.object.isRequired,\r\n  checkedArriveStations:PropTypes.object.isRequired,\r\n  departTimeStart:PropTypes.number.isRequired,\r\n  departTimeEnd:PropTypes.number.isRequired,\r\n  arriveTimeStart:PropTypes.number.isRequired,\r\n  arriveTimeEnd:PropTypes.number.isRequired,\r\n  setCheckedTicketTypes:PropTypes.func.isRequired,\r\n  setCheckedTrainTypes:PropTypes.func.isRequired,\r\n  setCheckedDepartStations:PropTypes.func.isRequired,\r\n  setCheckedArriveStations:PropTypes.func.isRequired,\r\n  setDepartTimeStart:PropTypes.func.isRequired,\r\n  setDepartTimeEnd:PropTypes.func.isRequired,\r\n  setArriveTimeStart:PropTypes.func.isRequired,\r\n  setArriveTimeEnd:PropTypes.func.isRequired,\r\n}","import {connect} from 'react-redux'\r\nimport './App.css'\r\nimport React , {\r\n  useCallback,\r\n  useEffect,\r\n  useMemo\r\n}from 'react'\r\n\r\nimport {bindActionCreators } from 'redux'\r\n\r\nimport Nav from '../common/Nav'\r\nimport List from './List'\r\nimport Bottom from './Bottom'\r\nimport Header from '../common/Header'\r\nimport URI from 'urijs'\r\nimport {\r\n  setFrom,\r\n  setTo,\r\n  setHighSpeed,\r\n  setSearchParsed,\r\n  setDepartDate,\r\n\r\n  setTrainList,\r\n  setTicketTypes,\r\n  setTrainTypes,\r\n  setDepartStations,\r\n  setArriveStations,\r\n\r\n  prevDate,\r\n  nextDate,\r\n\r\n  toggleHighSpeed,\r\n  toggleIsFiltersVisible,\r\n  toggleOnlyTickets,\r\n  toggleOrderType,\r\n\r\n  setCheckedTicketTypes,\r\n  setCheckedTrainTypes,\r\n  setCheckedDepartStations,\r\n  setCheckedArriveStations,\r\n  setDepartTimeStart,\r\n  setDepartTimeEnd,\r\n  setArriveTimeStart,\r\n  setArriveTimeEnd,\r\n\r\n\r\n} from './action'\r\nimport dayjs from 'dayjs'\r\nimport {h0} from '../common/fp'\r\nimport useNav from '../common/useNav'\r\n\r\n\r\nfunction App(props) {\r\n  const { \r\n    trainList, //array\r\n    from,\r\n    to,\r\n    departDate,\r\n    highSpeed, //布尔值\r\n    searchParsed,\r\n    dispatch,\r\n    orderType, //这是一个枚举值\r\n    onlyTickets, //布尔值\r\n    isFiltersVisible, //代表综合删选浮层是否显示\r\n    ticketTypes,//array\r\n    trainTypes,//array 代表不定项选择的所有选项\r\n    departStations,//array 代表不定项选择的所有选项\r\n    arriveStations,//array 代表不定项选择的所有选项\r\n    checkedTicketTypes, //都是对象\r\n    checkedTrainTypes, //都是对象\r\n    checkedDepartStations, //都是对象\r\n    checkedArriveStations, //都是对象\r\n    departTimeStart,\r\n    departTimeEnd,\r\n    arriveTimeStart,\r\n    arriveTimeEnd\r\n  }=props\r\n  const onBack = useCallback(()=>{\r\n    window.history.back()\r\n  },[])\r\n\r\n  useEffect(()=>{\r\n    const queries = URI.parseQuery(window.location.search)\r\n    const {\r\n      from,\r\n      to,\r\n      date,\r\n      highSpeed\r\n    }=queries\r\n    dispatch(setFrom(from))\r\n    dispatch(setTo(to))\r\n    dispatch(setDepartDate(h0(dayjs(date).valueOf())))\r\n    dispatch(setHighSpeed(highSpeed==='true'))\r\n    dispatch(setSearchParsed(true))\r\n  },[dispatch])\r\n\r\n  useEffect(()=>{\r\n    if (!searchParsed) {\r\n      return\r\n    }\r\n    const url = new URI('/rest/query')\r\n      .setSearch('from',from)\r\n      .setSearch('to',to)\r\n      .setSearch('date',dayjs(departDate).format('YYYY-MM-DD'))\r\n      .setSearch('highSpeed',highSpeed)\r\n      .setSearch ('orderType',orderType)\r\n      .setSearch ('onlyTickets',onlyTickets)\r\n      .setSearch ('checkedTicketTypes',Object.keys(checkedTicketTypes).join())\r\n      .setSearch ('checkedTrainTypes',Object.keys(checkedTrainTypes).join())\r\n      .setSearch ('checkedDepartStations',Object.keys(checkedDepartStations).join())\r\n      .setSearch ('checkedArriveStations',Object.keys(checkedArriveStations).join())\r\n      .setSearch ('departTimeStart',departTimeStart)\r\n      .setSearch ('departTimeEnd',departTimeEnd)\r\n      .setSearch ('arriveTimeStart',arriveTimeStart)\r\n      .setSearch ('arriveTimeEnd',arriveTimeEnd)\r\n      .toString()\r\n    fetch(url)\r\n      .then(response=>response.json())\r\n      .then(result=>{\r\n        const {\r\n          dataMap:{\r\n            directTrainInfo:{\r\n              trains,\r\n              filter:{\r\n                ticketType,\r\n                trainType,\r\n                depStation,\r\n                arrStation\r\n              }\r\n            }\r\n          }\r\n        }=result\r\n        dispatch(setTrainList(trains))\r\n        dispatch(setTicketTypes(ticketType))\r\n        dispatch(setTrainTypes(trainType))\r\n        dispatch(setDepartStations(depStation))\r\n        dispatch(setArriveStations(arrStation))\r\n      })\r\n  },[from, to, departDate, highSpeed, searchParsed, orderType, onlyTickets, checkedTicketTypes, checkedTrainTypes, checkedDepartStations, checkedArriveStations, departTimeStart, departTimeEnd, arriveTimeStart, arriveTimeEnd, dispatch])\r\n\r\n  const {\r\n    isPrevDisabled,\r\n    isNextDisabled,\r\n    prev,\r\n    next,\r\n  } =useNav(departDate,dispatch,prevDate,nextDate)\r\n\r\n  const bottomCbs = useMemo(()=>{\r\n    return bindActionCreators({\r\n      toggleHighSpeed,\r\n      toggleIsFiltersVisible,\r\n      toggleOnlyTickets,\r\n      toggleOrderType,\r\n      setCheckedTicketTypes,\r\n      setCheckedTrainTypes,\r\n      setCheckedDepartStations,\r\n      setCheckedArriveStations,\r\n      setDepartTimeStart,\r\n      setDepartTimeEnd,\r\n      setArriveTimeStart,\r\n      setArriveTimeEnd,\r\n    },dispatch)\r\n  },[dispatch])\r\n  if (!searchParsed) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"header-wrapper\">\r\n        <Header title={`${from}→${to}`} onBack={onBack}/>\r\n      </div>\r\n      <Nav \r\n        date={departDate}\r\n        isPrevDisabled={isPrevDisabled}\r\n        isNextDisabled={isNextDisabled}\r\n        prev={prev}\r\n        next={next}\r\n      />\r\n      <List \r\n        list={trainList}\r\n      />\r\n      <Bottom \r\n        highSpeed={highSpeed}\r\n        orderType={orderType}\r\n        onlyTickets={onlyTickets}\r\n        isFiltersVisible={isFiltersVisible}\r\n        ticketTypes={ticketTypes}\r\n        trainTypes={trainTypes}\r\n        departStations={departStations}\r\n        arriveStations={arriveStations}\r\n        checkedTicketTypes={checkedTicketTypes}\r\n        checkedTrainTypes={checkedTrainTypes}\r\n        checkedDepartStations={checkedDepartStations}\r\n        checkedArriveStations={checkedArriveStations}\r\n        departTimeStart={departTimeStart}\r\n        departTimeEnd={departTimeEnd}\r\n        arriveTimeStart={arriveTimeStart}\r\n        arriveTimeEnd={arriveTimeEnd}\r\n        {...bottomCbs}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  function mapStateToProps(state) {\r\n    return state\r\n  },\r\n  function mapDispatchToProps(dispatch) {\r\n    return {dispatch}\r\n  }\r\n)(App)","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport {Provider} from 'react-redux'\r\nimport 'normalize.css/normalize.css'\r\nimport store from './store'\r\nimport './index.css'\r\nimport App from './App'\r\nimport * as serviceWorker from '../serviceWorker'\r\n\r\nReactDOM.render(\r\n  <Provider store={store}><App /></Provider>,document.getElementById('root')\r\n)\r\n\r\nif ('production'===process.env.NODE_ENV){\r\n  serviceWorker.register()\r\n}else{\r\n  serviceWorker.unregister()\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n"],"sourceRoot":""}