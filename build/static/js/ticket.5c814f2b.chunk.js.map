{"version":3,"sources":["common/Nav.js","common/useNav.js","common/Detail.js","common/fp.js","common/Header.js","ticket/actions.js","ticket/reducers.js","ticket/store.js","ticket/context.js","ticket/Candidate.js","ticket/App.js","ticket/index.js","serviceWorker.js"],"names":["Nav","memo","props","date","prev","next","isPrevDisabled","isNextDisabled","currentString","useMemo","d","dayjs","format","locale","className","classnames","onClick","useNav","departDate","dispatch","prevDate","nextDate","h0","useCallback","Detail","arriveDate","departTimeStr","arriveTimeStr","trainNumber","departStation","arriveStation","durationStr","departDateStr","arriveDateStr","children","timestamp","Date","now","target","setHours","setMinutes","setSeconds","setMilliseconds","getTime","Header","onBack","title","width","height","points","stroke","strokeWidth","fill","ACTION_SET_DEPART_DATE","ACTION_SET_ARRIVE_DATE","ACTION_SET_DEPART_TIME_STR","ACTION_SET_ARRIVE_TIME_STR","ACTION_SET_DEPART_STATION","ACTION_SET_ARRIVE_STATION","ACTION_SET_TRAIN_NUMBER","ACTION_SET_DURATION_STR","ACTION_SET_TICKETS","ACTION_SET_IS_SCHEDULE_VISIBLE","ACTION_SET_SEARCH_PARSED","setDepartDate","type","payload","toggleIsScheduleVisible","getState","isScheduleVisible","setIsScheduleVisible","state","action","tickets","searchParsed","createStore","combineReducers","reducers","applyMiddleware","thunk","TrainContext","createContext","Channel","name","desc","useContext","src","URI","setSearch","toString","href","Seat","priceMsg","ticketsLeft","channels","expanded","onToggle","idx","style","length","map","channel","key","Candidate","useState","expandedIndex","setExpandedIndex","ticket","Schedule","lazy","connect","window","history","back","useEffect","queries","parseQuery","location","search","aStation","dStation","setDepartStation","setArriveStation","setTrainNumber","valueOf","setSearchParsed","document","url","fetch","then","response","json","result","detail","candidates","setDepartTimeStr","setArriveTimeStr","setArriveDate","setDurationStr","setTickets","detailCbs","bindActionCreators","Provider","value","fallback","ReactDOM","render","store","getElementById","serviceWorker","isLocalhost","Boolean","hostname","match","register","config","navigator","URL","process","origin","addEventListener","swUrl","contentType","headers","get","status","indexOf","ready","registration","unregister","reload","registerValidSW","catch","console","log","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","error"],"mappings":"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","file":"static/js/ticket.5c814f2b.chunk.js","sourcesContent":["import React,{\r\n  useMemo,\r\n  memo\r\n} from 'react'\r\nimport './Nav.css'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\nimport dayjs from 'dayjs'\r\nimport 'dayjs/locale/zh-cn'\r\n\r\nconst Nav = memo(function Nav(props) {\r\n  const {\r\n    date,\r\n    prev,\r\n    next,\r\n    isPrevDisabled,\r\n    isNextDisabled\r\n  }=props\r\n\r\n  const currentString=useMemo(()=>{\r\n    const d=dayjs(date)\r\n    return d.format('M月D日 ')+d.locale('zh-cn').format('ddd')\r\n    \r\n  },[date])\r\n  return (\r\n    <div className=\"nav\"> \r\n      <span \r\n        className={classnames('nav-prev',{\r\n          'nav-disabled':isPrevDisabled,\r\n        })}\r\n        onClick={prev}\r\n      >\r\n        前一天\r\n      </span>\r\n      <span className=\"nav-current\">{ currentString }</span>\r\n      <span \r\n        className={classnames('nav-next',{\r\n          'nav-disabled':isNextDisabled,\r\n        })}\r\n        onClick={next}\r\n      >\r\n        后一天\r\n      </span>\r\n    </div>\r\n  )\r\n})\r\n\r\nNav.propTypes = {\r\n    date:PropTypes.number.isRequired,\r\n    prev:PropTypes.func.isRequired,\r\n    next:PropTypes.func.isRequired,\r\n    isPrevDisabled:PropTypes.bool.isRequired,\r\n    isNextDisabled:PropTypes.bool.isRequired,\r\n}\r\n\r\nexport default Nav","import {\r\n  useCallback\r\n} from 'react'\r\nimport {h0} from './fp'\r\n\r\n\r\nexport default function useNav(departDate,dispatch,prevDate,nextDate) {\r\n  const isPrevDisabled = h0(departDate)<h0()\r\n  const isNextDisabled = h0(departDate)-h0() > 20*86400*1000\r\n\r\n  const prev =useCallback(()=>{\r\n    if (isPrevDisabled) {\r\n      return \r\n    }\r\n    dispatch(prevDate())\r\n  },[dispatch, isPrevDisabled, prevDate])\r\n\r\n  const next =useCallback(()=>{\r\n    if (isNextDisabled) {\r\n      return \r\n    }\r\n    dispatch(nextDate())\r\n  },[dispatch, isNextDisabled, nextDate]) \r\n  return {\r\n    isPrevDisabled,\r\n    isNextDisabled,\r\n    prev,\r\n    next,\r\n  }\r\n}","import React ,{\r\n  memo,\r\n  useMemo\r\n}from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport './Detail.css'\r\nimport dayjs from 'dayjs'\r\nimport 'dayjs/locale/zh-cn'\r\n\r\n\r\nfunction format(d) {\r\n  const date = dayjs(d)\r\n  return date.format('MM-DD')+''+date.locale('zh-cn').format('ddd')\r\n}\r\n\r\nconst Detail = memo(function Detail(props) {\r\n  const {\r\n    departDate,\r\n    arriveDate,\r\n    departTimeStr,\r\n    arriveTimeStr,\r\n    trainNumber,\r\n    departStation,\r\n    arriveStation,\r\n    durationStr,\r\n  }=props\r\n\r\n  const departDateStr = useMemo(()=>{\r\n      return format(departDate)\r\n    },[departDate])\r\n\r\n  const arriveDateStr = useMemo(()=>{\r\n    return format(arriveDate)\r\n  },[arriveDate])\r\n\r\n  return (\r\n    <div className=\"detail\">\r\n      <div className=\"content\">\r\n        <div className=\"left\">\r\n          <p className=\"city\">{departStation}</p>\r\n          <p className=\"time\">{departTimeStr}</p>\r\n          <p className=\"date\">{departDateStr}</p>\r\n          <p></p>\r\n        </div>\r\n        <div className=\"middle\">\r\n          <p className=\"train-name\">{ trainNumber }</p>\r\n          <p className=\"train-mid\">\r\n            {props.children}\r\n          </p>\r\n          <p className=\"train-time\">耗时{durationStr}</p>\r\n        </div>\r\n        <div className=\"right\">\r\n          <p className=\"city\">{arriveStation}</p>\r\n          <p className=\"time\">{arriveTimeStr}</p>\r\n          <p className=\"date\">{arriveDateStr}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  ) \r\n})\r\n\r\nDetail.propTypes={\r\n  departDate:PropTypes.number.isRequired,\r\n  arriveDate:PropTypes.number.isRequired,\r\n  departTimeStr:PropTypes.string,\r\n  arriveTimeStr:PropTypes.string,\r\n  trainNumber:PropTypes.string.isRequired,\r\n  departStation:PropTypes.string.isRequired,\r\n  arriveStation:PropTypes.string.isRequired,\r\n  durationStr:PropTypes.string,\r\n}\r\n\r\nexport default Detail\r\n\r\n\r\n\r\n","export function h0(timestamp=Date.now()) {\r\n  const target = new Date(timestamp)\r\n  target.setHours(0)\r\n  target.setMinutes(0)\r\n  target.setSeconds(0)\r\n  target.setMilliseconds(0)\r\n \r\n  return target.getTime()\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import \"./Header.css\"\r\nimport React from \"react\"\r\nimport PropTypes from \"prop-types\"\r\nfunction Header(props) {\r\n  const { onBack, title } = props\r\n\r\n  return (\r\n    <div className=\"header\">\r\n      <div className=\"header-back\" onClick={onBack}>\r\n        <svg width=\"42\" height=\"42\">\r\n          <polyline\r\n            points=\"25,13 16,21 25,29\"\r\n            stroke=\"#fff\"\r\n            strokeWidth=\"2\"\r\n            fill=\"none\"\r\n          />\r\n        </svg>\r\n      </div>\r\n      <h1 className=\"header-title\">{title}</h1>\r\n    </div>\r\n  )\r\n}\r\n\r\nHeader.propTypes = {\r\n  onBack: PropTypes.func.isRequired,\r\n  title: PropTypes.string.isRequired\r\n}\r\n\r\nexport default Header\r\n","import {h0} from '../common/fp'\r\n\r\nexport const  ACTION_SET_DEPART_DATE='SET_DEPART_DATE'\r\nexport const  ACTION_SET_ARRIVE_DATE='SET_ARRIVE_DATE'\r\nexport const  ACTION_SET_DEPART_TIME_STR='SET_DEPART_TIME_STR'\r\nexport const  ACTION_SET_ARRIVE_TIME_STR='SET_ARRIVE_TIME_STR'\r\nexport const  ACTION_SET_DEPART_STATION='SET_DEPART_STATION'\r\nexport const  ACTION_SET_ARRIVE_STATION='SET_ARRIVE_STATION'\r\nexport const  ACTION_SET_TRAIN_NUMBER='SET_TRAIN_NUMBER'\r\nexport const  ACTION_SET_DURATION_STR='SET_DURATION_STR'\r\nexport const  ACTION_SET_TICKETS='SET_TICKETS'\r\nexport const  ACTION_SET_IS_SCHEDULE_VISIBLE='SET_IS_SCHEDULE_VISIBLE'\r\nexport const  ACTION_SET_SEARCH_PARSED='SET_SEARCH_PARSED'\r\n\r\n\r\nexport function setDepartDate(departDate){\r\n  return {\r\n    type:ACTION_SET_DEPART_DATE,\r\n    payload:departDate\r\n  }\r\n}\r\nexport function setArriveDate(arriveDate){\r\n  return {\r\n    type:ACTION_SET_ARRIVE_DATE,\r\n    payload:arriveDate\r\n  }\r\n}\r\nexport function setDepartTimeStr(departTimeStr){\r\n  return {\r\n    type:ACTION_SET_DEPART_TIME_STR,\r\n    payload:departTimeStr\r\n  }\r\n}\r\nexport function setArriveTimeStr(arriveTimeStr){\r\n  return {\r\n    type:ACTION_SET_ARRIVE_TIME_STR,\r\n    payload:arriveTimeStr\r\n  }\r\n}\r\nexport function setDepartStation(departStation){\r\n  return {\r\n    type:ACTION_SET_DEPART_STATION,\r\n    payload:departStation\r\n  }\r\n}\r\nexport function setArriveStation(arriveStation){\r\n  return {\r\n    type:ACTION_SET_ARRIVE_STATION,\r\n    payload:arriveStation\r\n  }\r\n}\r\nexport function setTrainNumber(trainNumber){\r\n  return {\r\n    type:ACTION_SET_TRAIN_NUMBER,\r\n    payload:trainNumber\r\n  }\r\n}\r\nexport function setDurationStr(durationStr){\r\n  return {\r\n    type:ACTION_SET_DURATION_STR,\r\n    payload:durationStr\r\n  }\r\n}\r\nexport function setTickets(tickets){\r\n  return {\r\n    type:ACTION_SET_TICKETS,\r\n    payload:tickets\r\n  }\r\n}\r\nexport function setIsScheduleVisible(isScheduleVisible){\r\n  return {\r\n    type:ACTION_SET_IS_SCHEDULE_VISIBLE,\r\n    payload:isScheduleVisible\r\n  }\r\n}\r\nexport function toggleIsScheduleVisible() {\r\n  return (dispatch,getState)=>{\r\n    const {isScheduleVisible}=getState()\r\n    dispatch(setIsScheduleVisible(!isScheduleVisible))\r\n  }\r\n}\r\n\r\nexport function setSearchParsed(searchParsed){\r\n  return {\r\n    type:ACTION_SET_SEARCH_PARSED,\r\n    payload:searchParsed\r\n  }\r\n}\r\n\r\nexport function nextDate() {\r\n  return (dispatch, getState) => {\r\n      const { departDate } = getState();\r\n\r\n      dispatch(setDepartDate(h0(departDate) + 86400 * 1000));\r\n  };\r\n}\r\n\r\nexport function prevDate() {\r\n  return (dispatch, getState) => {\r\n      const { departDate } = getState();\r\n\r\n      dispatch(setDepartDate(h0(departDate) - 86400 * 1000));\r\n  };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import {\r\n  ACTION_SET_DEPART_DATE,\r\n  ACTION_SET_ARRIVE_DATE,\r\n  ACTION_SET_DEPART_TIME_STR,\r\n  ACTION_SET_ARRIVE_TIME_STR,\r\n  ACTION_SET_DEPART_STATION,\r\n  ACTION_SET_ARRIVE_STATION,\r\n  ACTION_SET_TRAIN_NUMBER,\r\n  ACTION_SET_DURATION_STR,\r\n  ACTION_SET_TICKETS,\r\n  ACTION_SET_IS_SCHEDULE_VISIBLE,\r\n  ACTION_SET_SEARCH_PARSED,\r\n} from './actions'\r\n\r\nexport default {\r\n  departDate(state=Date.now(),action){\r\n    const {type,payload}=action\r\n    switch (type) {\r\n      case ACTION_SET_DEPART_DATE:\r\n        return payload\r\n      default:\r\n    }\r\n    \r\n    return state\r\n  },\r\n\r\n  arriveDate(state=Date.now(),action){\r\n    const {type,payload}=action\r\n    switch (type) {\r\n      case ACTION_SET_ARRIVE_DATE:\r\n        return payload\r\n      default:\r\n    }\r\n    \r\n    return state\r\n  },\r\n\r\n  departTimeStr(state=null,action){\r\n    const {type,payload}=action\r\n    switch (type) {\r\n      case ACTION_SET_DEPART_TIME_STR:\r\n        return payload\r\n      default:\r\n    }\r\n    \r\n    return state\r\n  },\r\n\r\n  arriveTimeStr(state=null,action){\r\n    const {type,payload}=action\r\n    switch (type) {\r\n      case ACTION_SET_ARRIVE_TIME_STR:\r\n        return payload\r\n      default:\r\n    }\r\n    \r\n    return state\r\n  },\r\n\r\n  departStation(state=null,action){\r\n    const {type,payload}=action\r\n    switch (type) {\r\n      case ACTION_SET_DEPART_STATION:\r\n        return payload\r\n      default:\r\n    }\r\n    \r\n    return state\r\n  },\r\n\r\n  arriveStation(state=null,action){\r\n    const {type,payload}=action\r\n    switch (type) {\r\n      case ACTION_SET_ARRIVE_STATION:\r\n        return payload\r\n      default:\r\n    }\r\n    \r\n    return state\r\n  },\r\n\r\n  trainNumber(state=null,action){\r\n    const {type,payload}=action\r\n    switch (type) {\r\n      case ACTION_SET_TRAIN_NUMBER:\r\n        return payload\r\n      default:\r\n    }\r\n    \r\n    return state\r\n  },\r\n\r\n  durationStr(state=null,action){\r\n    const {type,payload}=action\r\n    switch (type) {\r\n      case ACTION_SET_DURATION_STR:\r\n        return payload\r\n      default:\r\n    }\r\n    \r\n    return state\r\n  },\r\n\r\n  tickets(state=[],action){\r\n    const {type,payload}=action\r\n    switch (type) {\r\n      case ACTION_SET_TICKETS:\r\n        return payload\r\n      default:\r\n    }\r\n    \r\n    return state\r\n  },\r\n\r\n  isScheduleVisible(state=false,action){\r\n    const {type,payload}=action\r\n    switch (type) {\r\n      case ACTION_SET_IS_SCHEDULE_VISIBLE:\r\n        return payload\r\n      default:\r\n    }\r\n    \r\n    return state\r\n  },\r\n  \r\n  searchParsed(state=false,action){\r\n    const {type,payload}=action\r\n    switch (type) {\r\n      case ACTION_SET_SEARCH_PARSED:\r\n        return payload\r\n      default:\r\n    }\r\n    \r\n    return state\r\n  },\r\n  \r\n}","import {\r\n  createStore,\r\n  combineReducers,\r\n  applyMiddleware\r\n} from 'redux'\r\n\r\nimport reducers from './reducers'\r\nimport thunk from 'redux-thunk'\r\n\r\nexport default createStore(\r\n  combineReducers(reducers),\r\n  {\r\n    departDate:Date.now(),\r\n    arriveDate:Date.now(),\r\n    departTimeStr:null,\r\n    arriveTimeStr:null,\r\n    departStation:null,\r\n    arriveStation:null,\r\n    trainNumber:null,\r\n    durationStr:null,\r\n    tickets:[], //座次和出票渠道\r\n    isScheduleVisible:false,\r\n    searchParsed:false, //url解析是否完成，，为true时我们才能进行一步数据请求，以及渲染\r\n  },//暂时我们的想到的就这11个state\r\n  applyMiddleware(thunk)\r\n)\r\n\r\n\r\n","import {createContext} from 'react'\r\n\r\nexport const TrainContext = createContext()\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React ,{\r\n  memo,\r\n  useState,\r\n  useCallback,\r\n  useMemo,\r\n  useContext\r\n}from 'react'\r\nimport URI from 'urijs'\r\nimport dayjs from 'dayjs'\r\nimport PropTypes from 'prop-types'\r\nimport './Candidate.css'\r\nimport {TrainContext} from './context'\r\n\r\nconst Channel = memo(function Channel(props) {\r\n  const {\r\n    name,\r\n    desc,\r\n    type\r\n  }=props\r\n\r\n  const {\r\n    trainNumber,\r\n    departStation,\r\n    arriveStation,\r\n    departDate,\r\n  }= useContext(TrainContext)\r\n\r\n  const src = useMemo(()=>{\r\n    return new URI('order.html')\r\n      .setSearch('trainNumber',trainNumber)\r\n      .setSearch('dStation',departStation)\r\n      .setSearch('aStation',arriveStation)\r\n      .setSearch('type',type)\r\n      .setSearch('date',dayjs(departDate).format('YYYY-MM-DD'))\r\n      .toString()\r\n  },[\r\n    trainNumber,\r\n    departStation,\r\n    arriveStation,\r\n    departDate, //unix时间戳\r\n    type,\r\n  ])\r\n\r\n  return (\r\n    <div className=\"channel\">\r\n      <div className=\"middle\">\r\n        <div className=\"name\">{name}</div>\r\n        <div className=\"desc\">{desc}</div>\r\n      </div>\r\n      <a href={src} className=\"buy-wrapper\">\r\n        <div className=\"buy\">买票</div>\r\n      </a>\r\n    </div>\r\n  )\r\n})\r\n\r\nChannel.propTypes={\r\n  name:PropTypes.string.isRequired,\r\n  desc:PropTypes.string.isRequired,\r\n  type:PropTypes.string.isRequired,\r\n}\r\n\r\nconst Seat =memo(function Seat(props) {\r\n  const {\r\n    type,\r\n    priceMsg,\r\n    ticketsLeft,\r\n    channels,\r\n    expanded,\r\n    onToggle,\r\n    idx\r\n  }=props\r\n  return (\r\n    <li>\r\n      <div className=\"bar\" onClick={()=>onToggle(idx)}>\r\n        <span className=\"seat\">{type}</span>\r\n        <span className=\"price\">\r\n          <i>￥</i>\r\n          {priceMsg}\r\n        </span>\r\n        <span className=\"btn\">{ expanded ? '收起': '预定' }</span>\r\n        <span className=\"num\">{ticketsLeft}</span>\r\n      </div>\r\n      <div \r\n        className=\"channels\"\r\n        style={{\r\n          height:expanded ? channels.length*55+'px':0\r\n        }}\r\n      >\r\n        {\r\n          channels.map(channel=>{\r\n            return  <Channel \r\n                      key={channel.name}\r\n                      {...channel}\r\n                      type={type}\r\n                   />\r\n          })\r\n        }\r\n      </div>\r\n    </li>\r\n  )\r\n})\r\n\r\nSeat.propTypes={\r\n  type:PropTypes.string.isRequired,\r\n  priceMsg:PropTypes.string.isRequired,\r\n  ticketsLeft:PropTypes.string.isRequired,\r\n  channels:PropTypes.array.isRequired,\r\n  expanded:PropTypes.bool.isRequired,\r\n  onToggle:PropTypes.func.isRequired,\r\n  idx:PropTypes.number.isRequired,\r\n}\r\n\r\n\r\nconst Candidate = memo(function Candidate(props) {\r\n  const [expandedIndex,setExpandedIndex] = useState(-1)\r\n  const {tickets} = props\r\n  const onToggle = useCallback((idx)=>{\r\n    setExpandedIndex(idx===expandedIndex? -1 :idx)\r\n  },[expandedIndex])\r\n\r\n  return (\r\n    <div className=\"candidate\">\r\n      <ul>\r\n        {\r\n          tickets.map((ticket,idx)=>{\r\n            return  <Seat \r\n                      {...ticket}\r\n                      key={ticket.type}\r\n                      expanded={expandedIndex===idx}\r\n                      onToggle={onToggle}\r\n                      idx={idx}\r\n                    />\r\n          })\r\n        }\r\n      </ul>\r\n    </div>\r\n  ) \r\n})\r\n\r\nCandidate.propTypes={\r\n  tickets:PropTypes.array.isRequired\r\n}\r\n\r\nexport default Candidate\r\n\r\n\r\n\r\n","import {connect} from 'react-redux'\r\nimport './App.css'\r\nimport React ,{\r\n  useEffect,\r\n  useCallback,\r\n  useMemo,\r\n  lazy,\r\n  Suspense\r\n}from 'react'\r\nimport {bindActionCreators} from 'redux'\r\n\r\nimport URI from 'urijs'\r\nimport Header from '../common/Header'\r\nimport Nav from '../common//Nav'\r\nimport Detail from '../common/Detail'\r\nimport Candidate from './Candidate'\r\n// import Schedule from './Schedule' //同步引入\r\n\r\nimport {\r\n  setDepartStation,\r\n  setArriveStation,\r\n  setTrainNumber,\r\n  setDepartDate, //unix时间戳\r\n  setSearchParsed,\r\n  prevDate,\r\n  nextDate,\r\n\r\n  setDepartTimeStr,\r\n  setArriveTimeStr,\r\n  setArriveDate,\r\n  setDurationStr,\r\n  setTickets,\r\n\r\n  toggleIsScheduleVisible,\r\n} from './actions'\r\n\r\nimport dayjs from 'dayjs'\r\nimport {h0} from '../common/fp'\r\nimport useNav from '../common/useNav'\r\nimport {TrainContext} from './context'\r\n\r\n\r\nconst Schedule = lazy(()=>import('./Schedule'))  //异步引入\r\n\r\n\r\n\r\nfunction App(props) {\r\n  const {\r\n    departDate,\r\n    arriveDate,\r\n    departTimeStr,\r\n    arriveTimeStr,\r\n    departStation,\r\n    arriveStation,\r\n    trainNumber,\r\n    durationStr,\r\n    tickets,\r\n    isScheduleVisible,\r\n    searchParsed,\r\n    dispatch,\r\n  }=props\r\n\r\n\r\n  const onBack = useCallback(()=>{\r\n    window.history.back()\r\n  },[])\r\n\r\n  useEffect(()=>{\r\n    const queries =  URI.parseQuery(window.location.search)\r\n    const {\r\n      aStation,\r\n      dStation,\r\n      date, //字符串\r\n      trainNumber,\r\n    }=queries\r\n    dispatch(setDepartStation(dStation))\r\n    dispatch(setArriveStation(aStation))\r\n    dispatch(setTrainNumber(trainNumber))\r\n    dispatch(setDepartDate(h0(dayjs(date).valueOf()))) //需要一个unix时间戳\r\n    dispatch(setSearchParsed(true)) //url解析完成\r\n  },[dispatch])\r\n\r\n  useEffect(()=>{\r\n    document.title = trainNumber\r\n  },[trainNumber])\r\n\r\n\r\n  useEffect(()=>{\r\n    if(!searchParsed){\r\n      return \r\n    }\r\n\r\n    const url = new URI('/rest/ticket')\r\n      .setSearch('data',dayjs(departDate).format('YYYY-MM-DD'))\r\n      .setSearch('trainNumber',trainNumber)\r\n      .toString()\r\n\r\n    fetch(url)\r\n      .then(response=>response.json())\r\n      .then(result=>{\r\n        const {\r\n          detail,\r\n          candidates\r\n        }=result\r\n\r\n        const {\r\n          departTimeStr,\r\n          arriveTimeStr,\r\n          arriveDate,\r\n          durationStr\r\n        }=detail\r\n\r\n        dispatch(setDepartTimeStr(departTimeStr))\r\n        dispatch(setArriveTimeStr(arriveTimeStr))\r\n        dispatch(setArriveDate(arriveDate))\r\n        dispatch(setDurationStr(durationStr))\r\n        dispatch(setTickets(candidates))\r\n      })\r\n  },[searchParsed, departDate, trainNumber, dispatch])\r\n\r\n  const {\r\n    isPrevDisabled,\r\n    isNextDisabled,\r\n    prev,\r\n    next,\r\n  } = useNav(departDate,dispatch,prevDate,nextDate)\r\n \r\n  const detailCbs = useMemo(()=>{\r\n    return bindActionCreators({\r\n      toggleIsScheduleVisible\r\n    },dispatch)\r\n  },[dispatch])\r\n\r\n\r\n  if(!searchParsed){\r\n    return null\r\n  }\r\n\r\n  \r\n  return(\r\n    <div className=\"app\">\r\n      <div className=\"header-wrapper\">\r\n        <Header \r\n          title={trainNumber}\r\n          onBack={onBack} //点击返回按钮之后的行为\r\n        />\r\n        </div>\r\n        <div className=\"nav-wrapper\">\r\n          <Nav \r\n            date={departDate}\r\n            isPrevDisabled={isPrevDisabled}\r\n            isNextDisabled={isNextDisabled}\r\n            prev={prev}\r\n            next={next}\r\n          />\r\n        </div>\r\n        <div className=\"detail-wrapper\">\r\n          <Detail \r\n            departDate={departDate}\r\n            arriveDate={arriveDate}\r\n            departTimeStr={departTimeStr}\r\n            arriveTimeStr={arriveTimeStr}\r\n            trainNumber={trainNumber}\r\n            departStation={departStation}\r\n            arriveStation={arriveStation}\r\n            durationStr={durationStr}\r\n          >\r\n            <span className=\"left\"></span>\r\n            <span \r\n              className=\"schedule\"\r\n              onClick={()=>detailCbs.toggleIsScheduleVisible()}\r\n            >\r\n              时刻表\r\n            </span>\r\n            <span className=\"right\"></span>\r\n          </Detail>\r\n        </div>\r\n\r\n        <TrainContext.Provider value={{trainNumber,departStation,arriveStation,departDate}}>\r\n          <Candidate \r\n            tickets={tickets}\r\n          />\r\n        </TrainContext.Provider>\r\n\r\n        { isScheduleVisible &&\r\n          <div className=\"mask\" onClick={()=>dispatch(toggleIsScheduleVisible())}>\r\n            <Suspense fallback={<div>loading</div>}>\r\n              <Schedule \r\n                date={departDate}\r\n                trainNumber={trainNumber}\r\n                departStation={departStation}\r\n                arriveStation={arriveStation}\r\n              />\r\n            </Suspense>\r\n        </div>\r\n        }\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  function mapStateToProps(state) {\r\n    return state\r\n  },\r\n  function mapDispatchToProps(dispatch) {\r\n    return {dispatch}\r\n  }\r\n)(App)","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport {Provider} from 'react-redux'\r\nimport 'normalize.css/normalize.css'\r\nimport store from './store'\r\nimport './index.css'\r\nimport App from './App'\r\nimport * as serviceWorker from '../serviceWorker'\r\n\r\nReactDOM.render(\r\n  <Provider store={store}><App /></Provider>,document.getElementById('root')\r\n)\r\n\r\nif ('production'===process.env.NODE_ENV){\r\n  serviceWorker.register()\r\n}else{\r\n  serviceWorker.unregister()\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n"],"sourceRoot":""}